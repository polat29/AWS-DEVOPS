(()=>{var Ps=Object.defineProperty;var v=(Zt,e)=>Ps(Zt,"name",{value:e,configurable:!0});(window.webpackJsonp=window.webpackJsonp||[]).push([["gantry-v2-async-client-boot-data"],{"0Gs4":function(Zt,e,t){"use strict";t.r(e),t.d(e,"accessibility",function(){return n.accessibility}),t.d(e,"accessibilityPersistent",function(){return n.accessibilityPersistent}),t.d(e,"activity",function(){return n.activity}),t.d(e,"adminAppsRequests",function(){return n.adminAppsRequests}),t.d(e,"adminInvites",function(){return n.adminInvites}),t.d(e,"allDMs",function(){return n.allDMs}),t.d(e,"allThreads",function(){return n.allThreads}),t.d(e,"allUnreads",function(){return n.allUnreads}),t.d(e,"appHomeContextTeam",function(){return n.appHomeContextTeam}),t.d(e,"appLauncher",function(){return n.appLauncher}),t.d(e,"appsIndex",function(){return n.appsIndex}),t.d(e,"appsInChannels",function(){return n.appsInChannels}),t.d(e,"awareness",function(){return n.awareness}),t.d(e,"blockKit",function(){return n.blockKit}),t.d(e,"blockKitState",function(){return n.blockKitState}),t.d(e,"bootData",function(){return n.bootData}),t.d(e,"browsers",function(){return n.browsers}),t.d(e,"canInteract",function(){return n.canInteract}),t.d(e,"cfm",function(){return n.cfm}),t.d(e,"channelEmails",function(){return n.channelEmails}),t.d(e,"channelInvites",function(){return n.channelInvites}),t.d(e,"channelLoading",function(){return n.channelLoading}),t.d(e,"disconnectedUsers",function(){return n.disconnectedUsers}),t.d(e,"channelMgmt",function(){return n.channelMgmt}),t.d(e,"channelSidebar",function(){return n.channelSidebar}),t.d(e,"channelSections",function(){return n.channelSections}),t.d(e,"channelPrefixes",function(){return n.channelPrefixes}),t.d(e,"checkoutFlow",function(){return n.checkoutFlow}),t.d(e,"clipsNux",function(){return n.clipsNux}),t.d(e,"composerPage",function(){return n.composerPage}),t.d(e,"connectivity",function(){return n.connectivity}),t.d(e,"consistency",function(){return n.consistency}),t.d(e,"deletedMessages",function(){return n.deletedMessages}),t.d(e,"desktop",function(){return n.desktop}),t.d(e,"dndV2",function(){return n.dndV2}),t.d(e,"downgradeStats",function(){return n.downgradeStats}),t.d(e,"drafts",function(){return n.drafts}),t.d(e,"draftsExpansion",function(){return n.draftsExpansion}),t.d(e,"draftSending",function(){return n.draftSending}),t.d(e,"draftImageThumbnails",function(){return n.draftImageThumbnails}),t.d(e,"draftOffline",function(){return n.draftOffline}),t.d(e,"offlineOutbox",function(){return n.offlineOutbox}),t.d(e,"draftPendingDestinations",function(){return n.draftPendingDestinations}),t.d(e,"draftPendingFileIds",function(){return n.draftPendingFileIds}),t.d(e,"draftUnfurls",function(){return n.draftUnfurls}),t.d(e,"draftContactUnfurls",function(){return n.draftContactUnfurls}),t.d(e,"ekmChanges",function(){return n.ekmChanges}),t.d(e,"ephemeralMessages",function(){return n.ephemeralMessages}),t.d(e,"eventlog",function(){return n.eventlog}),t.d(e,"expandables",function(){return n.expandables}),t.d(e,"experiments",function(){return n.experiments}),t.d(e,"fileAclChanging",function(){return n.fileAclChanging}),t.d(e,"fileRefresh",function(){return n.fileRefresh}),t.d(e,"fileUpload",function(){return n.fileUpload}),t.d(e,"filesFlexpane",function(){return n.filesFlexpane}),t.d(e,"gifUnfurls",function(){return n.gifUnfurls}),t.d(e,"endpoints",function(){return n.endpoints}),t.d(e,"help",function(){return n.help}),t.d(e,"imports",function(){return n.imports}),t.d(e,"informationBarriers",function(){return n.informationBarriers}),t.d(e,"inlineFilePreviews",function(){return n.inlineFilePreviews}),t.d(e,"invites",function(){return n.invites}),t.d(e,"lastUsedSlashCommand",function(){return n.lastUsedSlashCommand}),t.d(e,"links",function(){return n.links}),t.d(e,"lists",function(){return n.lists}),t.d(e,"solutions",function(){return n.solutions}),t.d(e,"megaphoneNotification",function(){return n.megaphoneNotification}),t.d(e,"memberDirectoryFlexpane",function(){return n.memberDirectoryFlexpane}),t.d(e,"messageActivity",function(){return n.messageActivity}),t.d(e,"messageEditWindow",function(){return n.messageEditWindow}),t.d(e,"messagePane",function(){return n.messagePane}),t.d(e,"messagePlaceholders",function(){return n.messagePlaceholders}),t.d(e,"modal",function(){return n.modal}),t.d(e,"noop",function(){return n.noop}),t.d(e,"onboarding",function(){return n.onboarding}),t.d(e,"openPopoversCount",function(){return n.openPopoversCount}),t.d(e,"appOrgAwareness",function(){return n.appOrgAwareness}),t.d(e,"pendingFiles",function(){return n.pendingFiles}),t.d(e,"pendingFileUploads",function(){return n.pendingFileUploads}),t.d(e,"permissions",function(){return n.permissions}),t.d(e,"privateNetworkEventView",function(){return n.privateNetworkEventView}),t.d(e,"workspaceManagement",function(){return n.workspaceManagement}),t.d(e,"adminRoles",function(){return n.adminRoles}),t.d(e,"accountTypePermissions",function(){return n.accountTypePermissions}),t.d(e,"rolesMgmt",function(){return n.rolesMgmt}),t.d(e,"adminContext",function(){return n.adminContext}),t.d(e,"persistedApiCalls",function(){return n.persistedApiCalls}),t.d(e,"prefs",function(){return n.prefs}),t.d(e,"presence",function(){return n.presence}),t.d(e,"pricingPlans",function(){return n.pricingPlans}),t.d(e,"promo",function(){return n.promo}),t.d(e,"reactionsToast",function(){return n.reactionsToast}),t.d(e,"dmsToast",function(){return n.dmsToast}),t.d(e,"accountTypes",function(){return n.accountTypes}),t.d(e,"userAccountTypes",function(){return n.userAccountTypes}),t.d(e,"saved",function(){return n.saved}),t.d(e,"scrollmarks",function(){return n.scrollmarks}),t.d(e,"searchInputBox",function(){return n.searchInputBox}),t.d(e,"searchInProductEducation",function(){return n.searchInProductEducation}),t.d(e,"searchResults",function(){return n.searchResults}),t.d(e,"searchSession",function(){return n.searchSession}),t.d(e,"searchSharedFacets",function(){return n.searchSharedFacets}),t.d(e,"searchUi",function(){return n.searchUi}),t.d(e,"searchHistory",function(){return n.searchHistory}),t.d(e,"socket",function(){return n.socket}),t.d(e,"stars",function(){return n.stars}),t.d(e,"summaryDetail",function(){return n.summaryDetail}),t.d(e,"pins",function(){return n.pins}),t.d(e,"teamCreation",function(){return n.teamCreation}),t.d(e,"threadMetadata",function(){return n.threadMetadata}),t.d(e,"threadsFlexpane",function(){return n.threadsFlexpane}),t.d(e,"threadSub",function(){return n.threadSub}),t.d(e,"toast",function(){return n.toast}),t.d(e,"topics",function(){return n.topics}),t.d(e,"typing",function(){return n.typing}),t.d(e,"uiSerialization",function(){return n.uiSerialization}),t.d(e,"unfurls",function(){return n.unfurls}),t.d(e,"unreadCounts",function(){return n.unreadCounts}),t.d(e,"unreadMarkers",function(){return n.unreadMarkers}),t.d(e,"unreadsView",function(){return n.unreadsView}),t.d(e,"userGroupsFlexpane",function(){return n.userGroupsFlexpane}),t.d(e,"userInteractions",function(){return n.userInteractions}),t.d(e,"userAlerts",function(){return n.userAlerts}),t.d(e,"view",function(){return n.view}),t.d(e,"viewSetMetadata",function(){return n.viewSetMetadata}),t.d(e,"workspace",function(){return n.workspace}),t.d(e,"enablePopupsBanner",function(){return n.enablePopupsBanner}),t.d(e,"newWhatsNew",function(){return n.newWhatsNew}),t.d(e,"composerToolbarUI",function(){return n.composerToolbarUI}),t.d(e,"composerToolbarButtonUI",function(){return n.composerToolbarButtonUI}),t.d(e,"recentlyJoinedChannels",function(){return n.recentlyJoinedChannels}),t.d(e,"recentlySharedFilesPicker",function(){return n.recentlySharedFilesPicker}),t.d(e,"dmBrowser",function(){return n.dmBrowser}),t.d(e,"quipUnreadCounts",function(){return n.quipUnreadCounts}),t.d(e,"quipFileMentionActivity",function(){return n.quipFileMentionActivity}),t.d(e,"siwsDomains",function(){return n.siwsDomains}),t.d(e,"connectedApps",function(){return n.connectedApps}),t.d(e,"messageFocus",function(){return n.messageFocus}),t.d(e,"clientTheme",function(){return n.clientTheme}),t.d(e,"adminMembers",function(){return n.adminMembers}),t.d(e,"allCalls",function(){return n.allCalls}),t.d(e,"huddles",function(){return n.huddles}),t.d(e,"huddleEvents",function(){return n.huddleEvents}),t.d(e,"huddlesCanvas",function(){return n.huddlesCanvas}),t.d(e,"huddleHistory",function(){return n.huddleHistory}),t.d(e,"huddlePage",function(){return n.huddlePage}),t.d(e,"huddleScheduled",function(){return n.huddleScheduled}),t.d(e,"huddleTroubleshooting",function(){return n.huddleTroubleshooting}),t.d(e,"huddleReadinessChecker",function(){return n.huddleReadinessChecker}),t.d(e,"peers",function(){return n.peers}),t.d(e,"device",function(){return n.device}),t.d(e,"appActions",function(){return n.appActions}),t.d(e,"appDefaultScopes",function(){return n.appDefaultScopes}),t.d(e,"appGlobalActions",function(){return n.appGlobalActions}),t.d(e,"shortcutsMenu",function(){return n.shortcutsMenu}),t.d(e,"appRecommendations",function(){return n.appRecommendations}),t.d(e,"channelActions",function(){return n.channelActions}),t.d(e,"appHomesMeta",function(){return n.appHomesMeta}),t.d(e,"appPermissions",function(){return n.appPermissions}),t.d(e,"appProfiles",function(){return n.appProfiles}),t.d(e,"appViews",function(){return n.appViews}),t.d(e,"appCollaborators",function(){return n.appCollaborators}),t.d(e,"blockKitModals",function(){return n.blockKitModals}),t.d(e,"blockKitModalsWindow",function(){return n.blockKitModalsWindow}),t.d(e,"apps",function(){return n.apps}),t.d(e,"bots",function(){return n.bots}),t.d(e,"botsMetadata",function(){return n.botsMetadata}),t.d(e,"channelHistory",function(){return n.channelHistory}),t.d(e,"addToMpdmHistoryPreview",function(){return n.addToMpdmHistoryPreview}),t.d(e,"channelMutationTimestamps",function(){return n.channelMutationTimestamps}),t.d(e,"channels",function(){return n.channels}),t.d(e,"channelsMeta",function(){return n.channelsMeta}),t.d(e,"channelLatests",function(){return n.channelLatests}),t.d(e,"channelCursors",function(){return n.channelCursors}),t.d(e,"channelsPriority",function(){return n.channelsPriority}),t.d(e,"conversationsListPrefs",function(){return n.conversationsListPrefs}),t.d(e,"customizeEmoji",function(){return n.customizeEmoji}),t.d(e,"developerActions",function(){return n.developerActions}),t.d(e,"emoji",function(){return n.emoji}),t.d(e,"flannelEmoji",function(){return n.flannelEmoji}),t.d(e,"emojiCollections",function(){return n.emojiCollections}),t.d(e,"environment",function(){return n.environment}),t.d(e,"externalTeamIds",function(){return n.externalTeamIds}),t.d(e,"externalTeamsChannels",function(){return n.externalTeamsChannels}),t.d(e,"extSharedChannelTeams",function(){return n.extSharedChannelTeams}),t.d(e,"files",function(){return n.files}),t.d(e,"idpGroups",function(){return n.idpGroups}),t.d(e,"mediaReactions",function(){return n.mediaReactions}),t.d(e,"membershipCounts",function(){return n.membershipCounts}),t.d(e,"members",function(){return n.members}),t.d(e,"membership",function(){return n.membership}),t.d(e,"membershipOrdered",function(){return n.membershipOrdered}),t.d(e,"messages",function(){return n.messages}),t.d(e,"emailDomains",function(){return n.emailDomains}),t.d(e,"messagesMeta",function(){return n.messagesMeta}),t.d(e,"notifications",function(){return n.notifications}),t.d(e,"orgMembers",function(){return n.orgMembers}),t.d(e,"orgMembersChannels",function(){return n.orgMembersChannels}),t.d(e,"orgMembersChannelCounts",function(){return n.orgMembersChannelCounts}),t.d(e,"paidFeatures",function(){return n.paidFeatures}),t.d(e,"reactions",function(){return n.reactions}),t.d(e,"rimetoOrgChart",function(){return n.rimetoOrgChart}),t.d(e,"blockedSlackConnectEmails",function(){return n.blockedSlackConnectEmails}),t.d(e,"scdmEducation",function(){return n.scdmEducation}),t.d(e,"slackConnectEligibility",function(){return n.slackConnectEligibility}),t.d(e,"slackConnectExternalTeamsList",function(){return n.slackConnectExternalTeamsList}),t.d(e,"slackConnectExternalTeamsCounts",function(){return n.slackConnectExternalTeamsCounts}),t.d(e,"slackConnectGuidelines",function(){return n.slackConnectGuidelines}),t.d(e,"slackConnectPrefs",function(){return n.slackConnectPrefs}),t.d(e,"slackConnectApprovals",function(){return n.slackConnectApprovals}),t.d(e,"slackConnectPendingInvites",function(){return n.slackConnectPendingInvites}),t.d(e,"tableMetadata",function(){return n.tableMetadata}),t.d(e,"connectInvites",function(){return n.connectInvites}),t.d(e,"sharedWorkspaceInvites",function(){return n.sharedWorkspaceInvites}),t.d(e,"connectableContacts",function(){return n.connectableContacts}),t.d(e,"slashCommand",function(){return n.slashCommand}),t.d(e,"selfTeamIds",function(){return n.selfTeamIds}),t.d(e,"storyView",function(){return n.storyView}),t.d(e,"teams",function(){return n.teams}),t.d(e,"teamCompanyInfo",function(){return n.teamCompanyInfo}),t.d(e,"userGroups",function(){return n.userGroups}),t.d(e,"userGroupMembership",function(){return n.userGroupMembership}),t.d(e,"window",function(){return n.window}),t.d(e,"appConfig",function(){return n.appConfig}),t.d(e,"orgApps",function(){return n.orgApps}),t.d(e,"commsImpact",function(){return n.commsImpact}),t.d(e,"activeDownloads",function(){return n.activeDownloads}),t.d(e,"workspaceLayout",function(){return n.workspaceLayout}),t.d(e,"viewLayout",function(){return n.viewLayout}),t.d(e,"customStatus",function(){return n.customStatus}),t.d(e,"appSettings",function(){return n.appSettings}),t.d(e,"quickReactions",function(){return n.quickReactions}),t.d(e,"externalDirectory",function(){return n.externalDirectory}),t.d(e,"orgAppsSearchWorkspace",function(){return n.orgAppsSearchWorkspace}),t.d(e,"analyticsOverview",function(){return n.analyticsOverview}),t.d(e,"channelAnalytics",function(){return n.channelAnalytics}),t.d(e,"memberAnalytics",function(){return n.memberAnalytics}),t.d(e,"teamAnalytics",function(){return n.teamAnalytics}),t.d(e,"appsAnalytics",function(){return n.appsAnalytics}),t.d(e,"huddleAnalytics",function(){return n.huddleAnalytics}),t.d(e,"slackAiAnalytics",function(){return n.slackAiAnalytics}),t.d(e,"clipAnalytics",function(){return n.clipAnalytics}),t.d(e,"adminHome",function(){return n.adminHome}),t.d(e,"flaggedContent",function(){return n.flaggedContent}),t.d(e,"tspEmailDelivery",function(){return n.tspEmailDelivery}),t.d(e,"mcCallV2",function(){return n.mcCallV2}),t.d(e,"contextBar",function(){return n.contextBar}),t.d(e,"setupCreation",function(){return n.setupCreation}),t.d(e,"calendar",function(){return n.calendar}),t.d(e,"inviteToWorkspace",function(){return n.inviteToWorkspace}),t.d(e,"slackbotResponses",function(){return n.slackbotResponses}),t.d(e,"teamSiteNav",function(){return n.teamSiteNav}),t.d(e,"bookmarksStore",function(){return n.bookmarksStore}),t.d(e,"appManifest",function(){return n.appManifest}),t.d(e,"hermesTriggers",function(){return n.hermesTriggers}),t.d(e,"hermesWorkflows",function(){return n.hermesWorkflows}),t.d(e,"adminAppsManage",function(){return n.adminAppsManage}),t.d(e,"adminAppFunctions",function(){return n.adminAppFunctions}),t.d(e,"adminFunctionsPermissions",function(){return n.adminFunctionsPermissions}),t.d(e,"adminWorkflowsPermissions",function(){return n.adminWorkflowsPermissions}),t.d(e,"adminAppsLookupInfo",function(){return n.adminAppsLookupInfo}),t.d(e,"adminAppsDomainsList",function(){return n.adminAppsDomainsList}),t.d(e,"appsProfileLookupInfo",function(){return n.appsProfileLookupInfo}),t.d(e,"adminAppsConfigLookupInfo",function(){return n.adminAppsConfigLookupInfo}),t.d(e,"adminTriggerTypesPermissions",function(){return n.adminTriggerTypesPermissions}),t.d(e,"networkAcquisition",function(){return n.networkAcquisition}),t.d(e,"feedback",function(){return n.feedback}),t.d(e,"reminders",function(){return n.reminders}),t.d(e,"sentMessages",function(){return n.sentMessages}),t.d(e,"undoSendMessage",function(){return n.undoSendMessage}),t.d(e,"channelConnect",function(){return n.channelConnect}),t.d(e,"channelManagers",function(){return n.channelManagers}),t.d(e,"sideEffects",function(){return n.sideEffects}),t.d(e,"filePermissions",function(){return n.filePermissions}),t.d(e,"orgSharedSideEffects",function(){return n.orgSharedSideEffects}),t.d(e,"hiddenUsers",function(){return n.hiddenUsers}),t.d(e,"windowHistory",function(){return n.windowHistory}),t.d(e,"appTabs",function(){return n.appTabs}),t.d(e,"quipDocEmbeds",function(){return n.quipDocEmbeds}),t.d(e,"quipEditorUiConnectors",function(){return n.quipEditorUiConnectors}),t.d(e,"blockFileDownload",function(){return n.blockFileDownload}),t.d(e,"quipMostRecent",function(){return n.quipMostRecent}),t.d(e,"dataSources",function(){return n.dataSources}),t.d(e,"hermesFunctionAuth",function(){return n.hermesFunctionAuth}),t.d(e,"hermesAppsAuth",function(){return n.hermesAppsAuth}),t.d(e,"imageAnnotation",function(){return n.imageAnnotation}),t.d(e,"mediaProgress",function(){return n.mediaProgress}),t.d(e,"quipCommentStream",function(){return n.quipCommentStream}),t.d(e,"iaTheme",function(){return n.iaTheme}),t.d(e,"activityIA4",function(){return n.activityIA4}),t.d(e,"teamTargetingCriteria",function(){return n.teamTargetingCriteria}),t.d(e,"browseRecent",function(){return n.browseRecent}),t.d(e,"modernSelling",function(){return n.modernSelling}),t.d(e,"connectorAppsInfo",function(){return n.connectorAppsInfo}),t.d(e,"canvasCollections",function(){return n.canvasCollections}),t.d(e,"hermesAiWorkflows",function(){return n.hermesAiWorkflows}),t.d(e,"assistantThreads",function(){return n.assistantThreads}),t.d(e,"ambientMessages",function(){return n.ambientMessages}),t.d(e,"workspaceAccountTypes",function(){return n.workspaceAccountTypes}),t.d(e,"externalWorkspaceUserGroups",function(){return n.externalWorkspaceUserGroups}),t.d(e,"externalWorkspaceLinkInvites",function(){return n.externalWorkspaceLinkInvites}),t.d(e,"workflowApps",function(){return n.workflowApps}),t.d(e,"workflowTemplates",function(){return n.workflowTemplates}),t.d(e,"dmsTab",function(){return n.dmsTab}),t.d(e,"aiSummary",function(){return n.aiSummary}),t.d(e,"todayEvents",function(){return n.todayEvents}),t.d(e,"remoteFilePreviewTokens",function(){return n.remoteFilePreviewTokens}),t.d(e,"remoteFilePreviewUrl",function(){return n.remoteFilePreviewUrl}),t.d(e,"recordDetails",function(){return n.recordDetails}),t.d(e,"widgets",function(){return n.widgets}),t.d(e,"hermesFunctions",function(){return n.hermesFunctions}),t.d(e,"canvasFileImport",function(){return n.canvasFileImport}),t.d(e,"route",function(){return n.route}),t.d(e,"quipThreadIds",function(){return P.v}),t.d(e,"quipCommentSnippets",function(){return P.n}),t.d(e,"quipCommentThreadIds",function(){return P.o}),t.d(e,"slackDocLastRead",function(){return P.z}),t.d(e,"slackDocFileIds",function(){return P.y}),t.d(e,"fileViewers",function(){return P.k}),t.d(e,"channelSpaces",function(){return P.j}),t.d(e,"canvasCabinets",function(){return P.a}),t.d(e,"canvasTemplates",function(){return P.h}),t.d(e,"canvasRecentlyViewedStore",function(){return P.f}),t.d(e,"channelCanvas",function(){return P.i}),t.d(e,"quipAtoms",function(){return P.m}),t.d(e,"quipUpdates",function(){return P.x}),t.d(e,"quipTempId",function(){return P.u}),t.d(e,"quipEphemeralMessages",function(){return P.p}),t.d(e,"quipTitle",function(){return P.w}),t.d(e,"quipPresence",function(){return P.s}),t.d(e,"quipFindModal",function(){return P.r}),t.d(e,"quipSystemMessages",function(){return P.t}),t.d(e,"quipActivityHistory",function(){return P.l}),t.d(e,"canvasReadOnly",function(){return P.e}),t.d(e,"quipEphemeralUnfurlMessages",function(){return P.q}),t.d(e,"canvasLastHighlightDismissed",function(){return P.d}),t.d(e,"canvasHighlightedSections",function(){return P.c}),t.d(e,"canvasSectionRichText",function(){return P.g}),t.d(e,"canvasHeaderImages",function(){return P.b}),t.d(e,"huddleCanJoin",function(){return I.a}),t.d(e,"alert",function(){return b}),t.d(e,"deviceStatus",function(){return Mt});var n=t("iqWL"),P=t("Hanr"),I=t("x9ag"),D=t("Cudo"),jt=t("LZPg"),B=t("CpTu"),ct=t("3Hq1");const lt=v((p,Z)=>!!Object(B.a)(p.alerts,R=>R.type===Z),"hasAlertOfType");var b=Object(D.e)().on(jt.mb,(p,Z)=>{let R=[...p.alerts];return Object(jt.Y)(Z)&&(Object(ct.a)(Z.isConnected)||(Z.isConnected?R=Object(D.f)(p,[D.a.Connecting,D.a.NoConnection]):Z.noInternet?R=Object(D.d)(p,D.a.NoConnection,Z.id):lt(p,D.a.NoConnection)||(R=Object(D.d)(p,D.a.Connecting,Z.id)))),{alerts:R}}),yt=t("AFNo"),Y=t("vZeV"),dt=t("2VFn");const Tt={main:{isMicrophoneCurrentlyActive:!1}};var Mt=Object(yt.b)({},Tt,{storeKey:"deviceStatus",persistenceEnabled:!1}).on(Y.a,(p,Z)=>{let{isCurrentlyActive:R,windowId:K}=Z;const q=K===dt.e||!K?"main":K,U=p[q];return(U==null?void 0:U.isMicrophoneCurrentlyActive)===R?p:U?{...p,[q]:{...U,isMicrophoneCurrentlyActive:R}}:{...p,[q]:{isMicrophoneCurrentlyActive:R}}})},"3q8y":function(Zt,e,t){"use strict";t.d(e,"a",function(){return Is});var n=t("NzZL"),P=t("eidb"),I=t("SQ0V"),D=t("lhZz"),jt=t("ktUG"),B=t("4d+W"),ct=t("+CZ0"),lt=t("lpU5"),Q=t("qN/r"),b=t("qlBN"),yt=t("9Rsq"),Y=t("m1zK");const dt=Object(I.c)("Open huddle trial offer modal",(c,l)=>{var d;const f=Object(D.getStateForClientStore)();if(!((d=Object(ct.q)(f))===null||d===void 0?void 0:d.channelId))return;const h=v(()=>{c(Object(lt.i)(!0))},"onSpeedbumpContinue");c(Object(b.a)({uiComponentVariant:jt.UiComponentVariant.HUDDLES_SIDEBAR_TRIAL_JOIN_MAX_LIMIT,onSpeedbumpContinue:h}))});dt.meta={name:"createThunk",key:"createThunkopenTrialOfferModal",description:"Open huddle trial offer modal"};const Tt=Object(I.c)("Open pref modal for Huddle",c=>{c(Object(Q.a)({activeSection:yt.a.videoAudio}))});Tt.meta={name:"createThunk",key:"createThunkopenPrefsModalForHuddle",description:"Open pref modal for Huddle"};const Et=Object(I.c)("Open Huddle invite modal, optionally with pre-selected members",(c,l,d)=>{const{payload:f}=d;c(Object(Y.a)({selectedMemberIds:f}))});Et.meta={name:"createThunk",key:"createThunkopenHuddlesInviteModal",description:"Open Huddle invite modal, optionally with pre-selected members"};const Mt=Object(B.c)([lt.h],dt),p=Object(B.c)([lt.g],Tt),Z=Object(B.c)([lt.f],Et);var R=t("s4P+"),K=t("G5NC"),q=t("U3eH"),U=t("n0Pp"),ut=t("Ba7O"),nt=t("zmn3"),M=t("ZP0B"),at=t("uKXT"),w=t("azkI"),N=t("ZAxE"),rt=t("J/RB"),V=t("gIpc"),st=t("xcHN");const dn=20,St="OFFLINE",Qt=Object(I.c)("Prefetch threads in the user\u2019s highest priority channels",(c,l,d)=>{const f=l(),m=Object(R.a)({state:f});Object(ut.a)(f)&&d.forEach(h=>{c(Object(V.a)()).then(()=>{m.info(St,"Prefetching thread: ",h.channel,h.thread_ts),c(Object(N.e)({channelId:h.channel,threadTs:h.thread_ts,reason:"prefetch-manager/prefetchHighPriorityThreads"})).then(T=>{let{msgs:C,hasMore:G,deleted:L}=T;const ot=Object(st.c)(h.channel,h.thread_ts);if(!ot)return;const k=Object(nt.a)(C,"ts");return c(Object(rt.a)({channelId:ot,latest:Object(M.a)(k)||"",oldest:Object(at.a)(k)||"",hasMore:{hasMoreStart:G,hasMoreEnd:!1},msgs:C,deleted:L}))})}).catch(T=>{m.error(St,`Error prefetching thread: ${h.thread_ts})`,T)})})});Qt.meta={name:"createThunk",key:"createThunkprefetchHighPriorityThreads",description:"Prefetch threads in the user\u2019s highest priority channels"};const ft=Object(I.c)("Prefetch history in the user\u2019s highest priority channels",(c,l)=>{const d=l(),f=Object(R.a)({state:d});if(!Object(ut.a)(d))return;Object(w.f)(d,dn).forEach(h=>{c(Object(V.a)()).then(()=>{f.info(St,"Prefetching: ",h.id),c(Object(N.b)({channelId:h.id,reason:"prefetch-manager/prefetchHighPriorityChannelHistory"})).then(T=>{let{msgs:C,hasMore:G,deleted:L}=T;const ot=C.filter(J=>J.reply_count>0);ot.length&&c(Qt(ot));const k=Object(nt.a)(C,"ts");return c(Object(rt.a)({channelId:h.id,latest:Object(M.a)(k)||"",oldest:Object(at.a)(k)||"",hasMore:{hasMoreStart:G,hasMoreEnd:!1},msgs:C,deleted:L}))})}).catch(T=>{f.error(St,`Error prefetching channel: ${h.id})`,T)})})});ft.meta={name:"createThunk",key:"createThunkprefetchHighPriorityChannelHistory",description:"Prefetch history in the user\u2019s highest priority channels"};var Yt=ft;const xt="OFFLINE",Nt=Object(I.c)("onConnected side effect handler",(c,l,d)=>{let{payload:f}=d;const m=l(),h=Object(R.a)({state:m});if(!Object(K.a)()||!Object(ut.a)(m)||f)return;const T=Object(U.k)(m)?"Prefetching priority channel history after initial connection":"Prefetching priority channel history after slow reconnect";h.info(xt,T),c(Yt())});Nt.meta={name:"createThunk",key:"createThunkonConnected",description:"onConnected side effect handler"};const kt=Object(B.c)([q.a],Nt);var un=t("rIJ2"),fn=t("9mJw"),z=t("O86Y"),Ut=t("9oTK"),it=t("n3tL"),qt=t("9Gfp"),wt=t("2XU3"),gt=t("Pw4T"),io=t("EXbH");function Wn(c){return document&&document.hasFocus&&document.hasFocus()&&Object(io.c)()===Object(z.g)(c)}v(Wn,"isSafeToCollectStats");const Pt=60*1e3,Oe=10*60*1e3,mn=10,je="client_stats_api_test_start",ye="client_stats_users_info_start",pn="client_stats_files_edgespeed_start",Ct="client_stats_www_humans_start",Wt=Object(I.c)("Measure the time to hit the api.test endpoint",(c,l)=>{const d=Object(gt.d)({getState:l});return c(Object(V.a)()).then(()=>(d.mark(je),c(Object(wt.apiCallExpedited)({method:"api.test",reason:"user-fetch-stats"})))).then(()=>{d.measureAndClear(je,"client_stats_api_test")})});Wt.meta={name:"createThunk",key:"createThunkmeasureApiTest",description:"Measure the time to hit the api.test endpoint"};const mt=Object(I.c)("Measure the time to fetch a user from the api",(c,l)=>{const d=Object(qt.a)(l()),f=Object(gt.d)({getState:l});return c(Object(V.a)()).then(()=>(f.mark(ye),c(Object(wt.apiCallExpedited)({method:"users.info",args:{user:d},reason:"user-fetch-stats"})))).then(()=>{f.measureAndClear(ye,"client_stats_users_info")})});mt.meta={name:"createThunk",key:"createThunkmeasureUsersInfo",description:"Measure the time to fetch a user from the api"};const hn=Object(I.c)("Measure the time to fetch a file from files.slack.com",(c,l)=>{const d=Object(gt.d)({getState:l});return d.mark(pn),fetch("//files.slack.com/edgespeed",{mode:"no-cors"}).then(()=>{d.measureAndClear(pn,"client_stats_files_edgespeed")})});hn.meta={name:"createThunk",key:"createThunkmeasureFiles",description:"Measure the time to fetch a file from files.slack.com"};const gn=Object(I.c)("Measure the time to fetch humans.txt from www",(c,l)=>{const d=Object(gt.d)({getState:l});return d.mark(Ct),fetch("/humans.txt",{mode:"no-cors"}).then(()=>{d.measureAndClear(Ct,"client_stats_www_humans")})});gn.meta={name:"createThunk",key:"createThunkmeasureHumansTxt",description:"Measure the time to fetch humans.txt from www"};let At={};const _t=Object(I.c)("Collect api stats",function(c,l){let{attempt:d=0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c(Object(V.a)()).then(Object(Ut.coroutine)(function*(){const f=l();if(d>=mn)return null;if(!Wn(f)){const m=Object(z.g)(f);return At[m]||(At[m]=setTimeout(()=>{clearTimeout(At[m]),At[m]=null,c(_t({attempt:d+1}))},Pt)),At[m]}return c(Wt()),c(mt()),window.fetch&&(c(hn()),c(gn())),null}))});_t.meta={name:"createThunk",key:"createThunkcollectApiStats",description:"Collect api stats"},_t.propTypes={attempt:it.default.number};var Te=_t;const qo={measureApiTest:Wt,measureUsersInfo:mt,measureFiles:hn,measureHumansTxt:gn,collectApiStatsTimeoutsById:At,clearAllApiStatsTimeouts:()=>{At={}}};var Dt=t("ifKl"),pt=t("xwCZ"),co=t("KgyH"),Se=t("iEG+"),Ce=t("/8UR"),Vt=t("5W60"),Ie=t("HQNN");const vn="client_stats_flannel_xhr_fetch_start",On=Object(I.c)("Measure the time it takes to fetch via flannel xhr",(c,l)=>{const d=Object(gt.d)({getState:l}),f=Object(pt.c)(l()),m={method:Vt.c.MEMBER_INFO,args:{updated_ids:{[f.id]:f.updated||0}},reason:"call-flannel-xhr-stats",EXPEDITED:!0},h=Object(z.g)(l());return Object(Se.a)(h,m).delay(1e3).then(()=>c(Object(V.a)())).then(()=>(d.mark(vn),Object(Se.a)(h,m))).then(()=>{d.measureAndClear(vn,"client_stats_flannel_xhr_fetch")}).catch(Dt.a)});On.meta={name:"createThunk",key:"createThunkmeasureFlannelXhrFetch",description:"Measure the time it takes to fetch via flannel xhr"},On.propTypes=null;const Vn=Object(I.c)("Measure the time it takes to fetch via flannel xhr, with fetch",(c,l)=>{const d=Object(gt.d)({getState:l}),f=Object(z.g)(l()),m=Object(pt.c)(l()),{token:h}=Object(co.a)({},{teamId:f}),T={method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({updated_ids:{[m.id]:m.updated||0},token:h})};c(Object(Ie.a)()).tap(C=>fetch(Object(Ce.a)(C,Vt.c.MEMBER_INFO),T)).then(C=>(d.mark(vn),fetch(Object(Ce.a)(C,Vt.c.MEMBER_INFO),T))).then(()=>{d.measureAndClear(vn,"client_stats_flannel_xhr_fetch_fetch")}).catch(Dt.a)});Vn.meta={name:"createThunk",key:"createThunkmeasureFlannelXhrFetchFetch",description:"Measure the time it takes to fetch via flannel xhr, with fetch"},Vn.propTypes=null;let $t={};const jn=Object(I.c)("Collect flannel xhr stats",function(c,l){let{attempt:d=0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c(Object(V.a)()).then(()=>{const f=l();if(d>=mn)return null;if(!Wn(f)){const m=Object(z.g)(f);return $t[m]||($t[m]=setTimeout(()=>{clearTimeout($t[m]),$t[m]=null,c(jn({attempt:d+1}))},Pt)),$t[m]}return c(Object(Ie.a)()).then(()=>{c(On())}).then(()=>{c(Vn())}),null})});jn.meta={name:"createThunk",key:"createThunkcollectFlannelXhrStats",description:"Collect flannel xhr stats"},jn.propTypes={attempt:it.default.number};var Ee=jn;const wo={measureFlannelXhrFetch:On,clearAllFlannelXhrStatsTimeouts:()=>{$t={}}};var lo=t("2nK1");const Me="client_stats_flannel_fetch_start",$n=Object(I.c)("Measure the time it takes to fetch via flannel xhr",(c,l)=>{const d=Object(gt.d)({getState:l}),f=Object(pt.c)(l()),m={method:Vt.a.MEMBER_QUERY,args:{updated_ids:{[f.id]:f.updated||0}},attemptNumber:Vt.b};return d.mark(Me),Object(Vt.d)(Object(z.g)(l()),m).then(()=>{d.measureAndClear(Me,"client_stats_flannel_fetch")}).catch(Dt.a)});$n.meta={name:"createThunk",key:"createThunkmeasureFlannelSocketFetch",description:"Measure the time it takes to fetch via flannel xhr"};let bt={};const yn=Object(I.c)("Collect flannel socket stats",function(c,l){let{attempt:d=0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c(Object(lo.b)()).then(()=>{const f=l();if(d>=mn)return null;if(!Wn(f)){const m=Object(z.g)(f);return bt[m]||(bt[m]=setTimeout(()=>{clearTimeout(bt[m]),bt[m]=null,c(yn({attempt:d+1}))},Pt)),bt[m]}return c($n()),null})});yn.meta={name:"createThunk",key:"createThunkcollectFlannelSocketStats",description:"Collect flannel socket stats"},yn.propTypes={attempt:it.default.number};var Pe=yn;const _o={measureFlannelSocketFetch:$n,clearAllFlannelSocketStatsTimeouts:()=>{bt={}}},Ae=Object(I.c)("Collect user fetch stats",c=>{c(Te()),c(Ee()),c(Pe())});Ae.meta={name:"createThunk",key:"createThunkcollectUserFetchStats",description:"Collect user fetch stats"};var uo=Ae;const Tn={},Gn=Object(I.c)("Start initial time period stats collection",(c,l)=>{const d=l();Object(R.a)({state:d}).info(`Will collect additional stats for the first ${Object(fn.a)(Oe/6e4,1)} minutes of this session`);const m=Object(z.g)(d);Tn[m]||(Tn[m]=setTimeout(()=>{clearTimeout(Tn[m]),Tn[m]=null,c(uo())},Oe))});Gn.meta={name:"createThunk",key:"createThunkstartInitialTimePeriodStatsCollection",description:"Start initial time period stats collection"};var fo=Gn,Gt=t("RU1E");const mo=25,Sn=Object(I.c)("maybeStartInitialTimePeriodStatsCollection side effect handler",(c,l,d)=>{!Object(K.a)()||d.payload||!Object(un.a)(mo)||c(fo())});Sn.meta={name:"createThunk",key:"createThunkmaybeStartInitialTimePeriodStatsCollection",description:"maybeStartInitialTimePeriodStatsCollection side effect handler"};const ho=Object(B.c)([Gt.a],Sn);var De=t("2XL1"),Kn=t("I27i"),go=t("Zbwg"),zn=t("q1tI"),$=t.n(zn),Ft=t("nNoG"),vo=t("hwN2"),Oo=t("g3a/"),jo=t("oY18"),be=t("6CnZ");const Xn=new Ft.b("offline_mode"),Fe={name:"cloud-offline",size:"20"};function Re(c){let{clientLastOnline:l,channelHasHistory:d,onCloseComplete:f=Dt.a}=c;const m=d?Xn.rt("Last updated {clientLastOnline}.",{clientLastOnline:Object(vo.a)(l)}):Xn.rt("Go online to get the latest messages.");return $.a.createElement(Oo.a,{position:"top-right",svgIconProps:Fe,onCloseComplete:f},$.a.createElement("span",null,$.a.createElement("strong",null,Xn.rt("No connection."))," ",m))}v(Re,"OfflineChannelToast"),Re.displayName="OfflineChannelToast";const Be=Re,He=Object(I.c)("shows a toast indicating when the client was last connected",(c,l,d)=>{let{channelId:f}=d;const m=l(),h=Object(Kn.g)(m)/1e3,T=Object(be.b)(m,f),C=$.a.createElement(Be,{clientLastOnline:h,channelHasHistory:T});c(Object(jo.a)({element:C}))});He.meta={name:"createThunk",key:"createThunkshowOfflineChannelToast",description:"shows a toast indicating when the client was last connected"};var Le=Be,yo=t("RV0M"),Ne=t("2VFn");const Cn=Object(I.c)("onChannelChange side effect handler",(c,l,d,f)=>{var m;const h=l();if(!Object(K.a)()||Object(Kn.d)(h))return;const{getSiblingView:T}=f(yo.a),C=(m=T(h,{container:Ne.k.Primary}))===null||m===void 0?void 0:m.id;!Object(go.a)(C)||!C||Object(ut.a)(h)||c(He({channelId:C}))});Cn.meta={name:"createThunk",key:"createThunkonChannelChange",description:"onChannelChange side effect handler"};const To=Object(B.c)([De.f],Cn);var Jn=t("1myf"),Ue=t("wBxZ"),Zn=t("7EGn"),We=t("0VPD"),So=t("F294"),Qn=t("Z7Ay"),Yn=t("E3dU"),Co=t("oztq"),xn=t("ZKjC");const pe=Object(xn.b)((c,l)=>{var d,f;return c==null||(d=c.channelsMeta)===null||d===void 0||(f=d.openedThisSession)===null||f===void 0?void 0:f[l]});pe.meta={name:"createSelector",key:"createSelectorgetOpenedThisSession",description:(c,l)=>{var d,f;return c==null||(d=c.channelsMeta)===null||d===void 0||(f=d.openedThisSession)===null||f===void 0?void 0:f[l]}};var Io=t("Wn1n"),In=t("4hjS"),Ve=t("bqbz"),kn=t("PJbD"),$e=t("/JQq"),vt=t("Yauy"),qn=t("j7fZ"),Ge=t("+vFE"),Eo=t("5NQM"),En=t("UIWO");const tn={},nn={externalDMs:11,internalDMs:11,appDMs:11,recordChannels:15},Mn=7*24*60*60,Mo={externalDMs:Mn,internalDMs:Mn,appDMs:Mn,recordChannels:0},wn=10,Kt=Object(I.c)("Auto-close old channels according to certain rules",function(c,l){let{maxToClose:d}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{maxToClose:wn};const f=l(),m=Object(R.a)({state:f,label:"CHECK-FOR-OLD-CHANNELS"}),h=Object(pt.b)(f);if(Ke(f))return;if(!ze(f)){m.info("Missing channel section information");return}const T=[...Object(Yn.r)(f),...Object(Yn.o)(f)],{externalDMs:C,internalDMs:G,appDMs:L}=T.reduce((J,Ot)=>(Pn(f,Ot)&&(Object(qn.a)(Ot)?J.externalDMs.push(Ot):Object(Co.a)(Ot,h)?J.appDMs.push(Ot):J.internalDMs.push(Ot)),J),{externalDMs:[],internalDMs:[],appDMs:[]}),ot=Object(Yn.w)(f).filter(J=>Pn(f,J));C.length<=nn.externalDMs&&m.info(`Within limit [external DMs]: ${C.length}`),G.length<=nn.internalDMs&&m.info(`Within limit [internal DMs]: ${G.length}`),L.length<=nn.appDMs&&m.info(`Within limit [app DMs]: ${L.length}`),ot.length<=nn.recordChannels&&m.info(`Within limit [record channels]: ${ot.length}`),Object.entries({externalDMs:C,internalDMs:G,appDMs:L,recordChannels:ot}).forEach(J=>{let[Ot,Un]=J;const xo=Un.length-nn[Ot],ko={},Es=Un.filter(Lt=>Xe(f,Lt)?(ko[Lt.id]=_n(f,Lt),ko[Lt.id]>=Mo[Ot]):!1),Ms=Object(Jn.a)(Es,Lt=>ko[Lt.id]*-1);Object(Ue.a)(Ms,Math.min(xo,d)).forEach(Lt=>{m.info(`Closing ${Lt.id}`),c(Object(kn.a)({channelId:Lt.id,reason:"checkForOldChannelsToClose"}))})})});Kt.meta={name:"createThunk",key:"createThunkcheckForOldChannelsToClose",description:"Auto-close old channels according to certain rules"},Kt.propTypes={maxToClose:it.default.number};function Pn(c,l){return!(Object(vt.qb)(c,l)||Object(Ve.f)(c,l.id))&&(Object(vt.jb)(l)||Object(vt.ub)(l))}v(Pn,"isChannelListed");function Ke(c){if(Object(En.a)(c)||!Object(qt.m)(c))return!1;const l=Object(Zn.a)(Object(pt.c)(c),"enterprise_user.teams",[]),d=Object(In.g)(c)||[],f=Object(We.a)(d,l);return Object(So.a)(f)!==Object(z.g)(c)}v(Ke,"shouldSkipThisTeam");function ze(c){const l=Object(Ve.w)(c);return l.length===0?!1:!l.some(d=>!Object(Ge.a)(d.type)&&Object(Ge.b)(d))}v(ze,"areChannelSectionsLoaded");function Xe(c,l){return!(Object(vt.pb)(l)||Object($e.a)(c,l)||!Object(vt.jb)(l)||Object(vt.ub)(l)||Object(vt.v)(c,l.id)||pe(c,l.id)||l.id===Object(Io.a)(c))}v(Xe,"canCloseThisChannel");function _n(c,l){const d=Object(be.j)(c,l.id)||{timestamps:[]},f=parseFloat(Object(vt.A)(c,l,d.timestamps))||Object(vt.f)(l),m=isNaN(f)?0:f*1e3;return Math.ceil(Date.now()-m)/1e3}v(_n,"getIdleTime");const te=Object(I.c)("onConnected side effect handler",(c,l,d)=>{if(!Object(K.a)()||!Object(qt.h)(l()))return;const f=Object(z.g)(l());f&&(clearInterval(tn[f]),tn[f]=setTimeout(()=>{c(Kt({maxToClose:wn*2})),tn[f]=setInterval(()=>{Object(Eo.c)(()=>{c(Kt({maxToClose:wn}))},{timeout:6e4})},15*60*1e3)},1*60*1e3))});te.meta={name:"createThunk",key:"createThunkonConnected",description:"onConnected side effect handler"};const ne=Object(I.c)("onDisconnected side effect handler",(c,l,d)=>{if(!Object(K.a)()||!Object(qt.h)(l()))return;const f=Object(z.g)(l());f&&(clearTimeout(tn[f]),clearInterval(tn[f]))});ne.meta={name:"createThunk",key:"createThunkonDisconnected",description:"onDisconnected side effect handler"};const Po=Object(B.c)([q.a],te),Je=Object(B.c)([q.c],ne),y={checkForOldChannelsToClose:Kt,shouldSkipThisTeam:Ke,areChannelSectionsLoaded:ze,canCloseThisChannel:Xe,getIdleTime:_n};Object(Qn.a)("checkForOldChannelsToClose",Kt);var X=t("a9XA");const en=Object(B.c)([De.f],X.a);var ht=t("LZPg"),An=t("sNDC"),ee=t("GNR7"),Ao=t("0dq7"),Ze=t("QIbu");let on;const _=1500,Qe=Object(I.c)("updatePeerSideEffect side effect handler",(c,l,d)=>{on=Date.now()});Qe.meta={name:"createThunk",key:"createThunkupdatePeerSideEffectHandler",description:"updatePeerSideEffect side effect handler"};const Ye=Object(I.c)("setRemotePeerIsConnectedSideEffect side effect handler",(c,l,d)=>{let{payload:f}=d;const m=Object(D.getClientStoreInstance)(),h=m==null?void 0:m.getState(),T=h?Object(ct.g)(h):null;if(f.isConnected&&T===Ao.a.STARTED&&on&&Date.now()-on>_){if(Object(ee.j)(l())>4)return;c(Object(An.g)())}});Ye.meta={name:"createThunk",key:"createThunksetRemotePeerIsConnectedSideEffectHandler",description:"setRemotePeerIsConnectedSideEffect side effect handler"};const xe=Object(I.c)("removeRemotePeerSideEffect side effect handler",(c,l,d)=>{Object(ee.j)(l())>4||c(Object(An.h)())});xe.meta={name:"createThunk",key:"createThunkremoveRemotePeerSideEffectHandler",description:"removeRemotePeerSideEffect side effect handler"};const ke=Object(I.c)("addEphemeralMessageSideEffect side effect handler",(c,l,d)=>{let{payload:f}=d;const{isScreenshareEnabled:m}=Object(ht.T)(l())||{};m||c(Object(An.f)({emoji:f.emoji,isEffect:!!f.reactionType&&f.reactionType===Ze.d.Effect}))});ke.meta={name:"createThunk",key:"createThunkaddEphemeralMessageSideEffectHandler",description:"addEphemeralMessageSideEffect side effect handler"};const Do=Object(B.c)([ht.mb],Qe),bo=Object(B.c)([ht.jb],Ye),Fo=Object(B.c)([ht.db],xe),Ro=Object(B.c)([ht.a],ke);var Rt=t("vfQU"),Bo=t("KciV");const oe=Object(I.c)("maybeMinimizeDesktopApp side effect handler",function(){var c=Object(Ut.coroutine)(function*(l,d,f){let{payload:m}=f;const h=!!Object(ct.c)(Object(D.getStateForClientStore)());if(!(!Object(Rt.db)()||!h)&&Object(ht.Y)(m)&&m.isScreenshareEnabled){const T=Object(ht.r)(d()),C=Object(Rt.O)(),G=yield Object(Rt.J)(C).catch(L=>{Object(Bo.c)().error(`Minimize desktop app on huddle screen share failed. Error=${L.name}, message=${L.message}`)});if(!T||!G)return;T.displayId===G.id&&Object(Rt.Cb)(C)}});return function(l,d,f){return c.apply(this,arguments)}}());oe.meta={name:"createThunk",key:"createThunkmaybeMinimizeDesktopApp",description:"maybeMinimizeDesktopApp side effect handler"};const Ho=Object(B.c)([ht.mb],oe),ts={maybeMinimizeDesktopApp:oe};var Dn=t("t4eE"),sn=t("j77i"),an=t("JoR1"),qe=t("T1zM");const se=Object(I.c)("maybe remove this team from the app exclusion list",(c,l,d)=>{let{payload:f}=d;if(!Object(Dn.b)())return;const m=l();if(f||!Object(U.k)(m)||!Object(z.d)(m))return;const h=Object(z.g)(m);h&&Object(sn.q)().includes(h)&&Object(an.e)(m).includes(h)&&(Object(R.a)({teamId:h}).info("UNEXCLUDE_TEAM","Removing this team from the app exclusion list"),c(Object(qe.b)({teamId:h})))});se.meta={name:"createThunk",key:"createThunkmaybeUnexcludeTeam",description:"maybe remove this team from the app exclusion list"};const we=Object(B.c)([q.a],se),ns={maybeUnexcludeTeam:se};var bn=t("BUpV"),_e=t("gXpJ"),Lo=t("WCk1"),ae=t("3FFW"),re=t("hhWw"),No=t("k+ri");const Fn=Object(Lo.a)("Fetch start data",function(){var c=Object(Ut.coroutine)(function*(l,d,f){let{reason:m,...h}=f;const T=Object(z.h)(d());let C=null;if(Object(re.b)()){const L=Object(qt.a)(d());C=yield Object(No.a)({teamId:T,userId:L})}if(Object(En.a)(d())){const L={_x_reason:m,...Object(ae.a)({shouldIncludeConfigVersion:!0,teamOrEnterpriseId:T}),...C?{min_channel_updated:C}:{},...h};return l(Object(wt.apiCallExpedited)({method:"client.userBoot",args:L,reason:m}))}const G={version:5,_x_reason:m,...Object(ae.a)({shouldIncludeConfigVersion:!0,teamOrEnterpriseId:T}),...C?{min_channel_updated:C}:{},...h};return l(Object(wt.apiCallExpedited)({method:"client.boot",args:G,reason:m}))});return function(l,d,f){return c.apply(this,arguments)}}());Fn.meta={name:"createFetcher",key:"createFetcherfetchStartData",description:"Fetch start data"},Fn.propTypes={reason:it.default.string.isRequired,only_self_subteams:it.default.oneOf([0,1])};var rn=t("46B2"),cn=t("Ki/W"),Rn=t("IaBJ"),Uo=t("YkFH");const Wo=30*1e3,ie=Object(I.c)("sonic Resynced side effect handler",c=>c(Fn({reason:"resynced-topics"})).timeout(Wo).then(cn.b).then(l=>{l.unchangedChannelIds&&c(Object(Rn.b)({unchangedChannelsJoinedIds:l.unchangedChannelIds,isAnyPrivateMembershipAllowed:!0})),c(Object(bn.a)()),c(Object(rn.a)({modelData:l,source:Uo.b.ClientBootTopicsResynced}))}).catch(()=>c(Object(bn.a)())).finally(()=>c(Object(_e.b)())));ie.meta={name:"createThunk",key:"createThunkresyncedHandler",description:"sonic Resynced side effect handler"};const po=Object(B.c)([_e.e],ie);var zt=t("Lgge"),Bn=t("PqaZ"),es=t("ycWl"),Vo=t("31wZ"),$o=t("PLUl"),Go=t("KGIc");function Ko(c){let{bootData:l,traceMeta:d}=c;if(!Object(cn.a)(l))return Promise.resolve(!1);const{should_reload:f}=l;var m;const h=(m=l.recommended_build_version)!==null&&m!==void 0?m:void 0;var T;const C=(T=l.build_manifest_last_modified)!==null&&T!==void 0?T:void 0;var G;const L=(G=l.client_min_version)!==null&&G!==void 0?G:void 0,ot=Object(Go.d)();if(!parseInt(ot??"0",10))return Promise.resolve(!1);let J;if(d){const{traceStartTime:Un,tags:xo}=d;J=Object($o.a)().createSpan({name:"mvb:stale",options:{startTime:Un,tags:xo}})}if(f){Object(Vo.a)(L)&&(J&&(J.setTag("client_min_version",L),J.close(),Object($o.a)().reportSpans([J])),Object(es.a)({reason:"Reloading due to a min version bump (client.boot)",reasonKey:"min_version_bump",recommendedBuildVersion:h,buildManifestLastModified:C}));const Un=!0;return Promise.resolve(Un)}const Ot=!1;return Promise.resolve(Ot)}v(Ko,"maybeReloadForMinVersionBump");var to=t("mard"),zo=t("BcIr");let Hn={};function ce(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Hn[c]}v(ce,"getProvisionalConnectionCountsForTeamId");function le(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Hn[c]=l}v(le,"setProvisionalConnectionCountsForTeamId");const de=Object(I.c)("provisionallyConnected side effect handler",(c,l)=>{const d=Object(z.g)(l());le(d,(ce(d)||0)+1);const f=ce(d);if(!Object(U.e)(l()))return zt.a.resolve(c(Object(Bn.e)()));const m=Date.now();return c(Object(Gt.a)(!0)),c(Fn({reason:"provisionally-connected"})).then(h=>Ko({bootData:h,traceMeta:{traceStartTime:m,tags:{reason:"prov_connect",team_id:d,method:"client.boot"}}}).then(T=>T?Object(to.a)():h)).then(cn.b).then(h=>{const T=ce(d);Object(U.m)(l())&&T===f&&c(Object(Bn.e)()),h.unchangedChannelIds&&c(Object(Rn.t)({teamId:h.teamData.id,unchangedChannelIds:h.unchangedChannelIds,unchangedChannelsJoinedIds:h.unchangedChannelIds})),c(Object(rn.a)({modelData:h,source:Uo.b.ClientBootSlowReconnect}))}).then(()=>{c(Object(zo.a)())}).catch(h=>{var T;const C=(h==null||(T=h.data)===null||T===void 0?void 0:T.error)||(h==null?void 0:h.message);Object(R.a)({getState:l}).error("SLOW-RECONNECT",`Failed to fetch boot data on slow reconnect: ${C}`)}).finally(()=>c(Object(Gt.a)(!1)))});de.meta={name:"createThunk",key:"createThunkprovisionallyConnectedSideEffectHandler",description:"provisionallyConnected side effect handler"};const no=Object(B.c)([q.d],de);Object.defineProperty({provisionallyConnectedSideEffectHandler:de},"provisionalConnectionCounts",{get:()=>Hn,set:c=>{Hn=c}});var eo=t("60mp"),Xo=t("ltDl"),Jo=t("puq3"),Ln=t("JN2d"),ln=t("+jzL"),Xt=t("LqbL"),Jt=t("7xYR"),Zo=t("3Nmk"),ue=t("JfJV"),fe=t("uNaj"),oo=t("+kJ4"),me=t("W29z"),i=t("kBpe"),o=t("K4XF"),s=t("bJfW"),a=t("hoMV"),r=t("KLFD"),u=t("skGY");function g(c){const l=Object(R.b)({label:"AUTH"}),d=Object(Ln.a)(),f=c.filter(m=>m in d).map(m=>{Object(Jt.isWorkspaceExpired)(Object(D.getStateForClientStore)(),m)?(l.info(`Re-adding expired workspace ${m} / ${d[m].url}`),Object(D.dispatchForClientStore)(Object(Xt.updateWorkspaceMeta)({id:m,meta:{...d[m],isExpired:!1}}))):Object(Jt.isWorkspacePendingAuth)(Object(D.getStateForClientStore)(),m)?(l.info(`Updating pending auth workspace ${m} to authed / ${d[m].url}`),Object(D.dispatchForClientStore)(Object(Xt.updateWorkspaceMeta)({id:m,meta:{...d[m],isPendingAuth:!1}}))):(l.info(`Adding workspace ${m} / ${d[m].url}`),Object(D.dispatchForClientStore)(Object(Xt.addWorkspace)({id:m,meta:d[m]})));const h=Object(r.d)(m);return Object(u.a)(h)});return zt.a.all(f)}v(g,"bootAddedWorkspaces");function j(c){const l=Object(R.b)({label:"AUTH"}),d=Object(Ln.a)(),f=c.reduce((h,T)=>{var C;return h[T]=(C=Object(sn.i)(T,"token"))!==null&&C!==void 0?C:null,h},{});c.forEach(h=>{if(!Object(D.getStoreInstanceByTeamId)(h))return;l.info(`Updating credentials for workspace ${h} / ${d[h].url}`);const T=f[h];T&&Object(ln.d)(T,h);const C=Object(sn.i)(h,"enterprise_id"),G=Object(sn.i)(h,"enterprise_api_token");C&&G&&Object(ln.d)(G,C),Object(D.dispatchForClientStore)(Object(Xt.updateWorkspaceMeta)({id:h,meta:d[h]}))}),Object(We.a)(Object(a.a)(),c).forEach(h=>{l.info(`Updating socket token for workspace ${h}`);const T=f[h];T&&Object(D.dispatchForTeamId)(h,Object(Bn.j)(T))})}v(j,"updateChangedWorkspaces");function E(c){const l=Object(R.b)({label:"AUTH"}),d=Object(Ln.a)();c.forEach(f=>{l.info(`Adding pending auth workspace ${f} / ${d[f].url}`),Object(D.dispatchForClientStore)(Object(Xt.addWorkspace)({id:f,meta:d[f]}))})}v(E,"addPendingAuthWorkspaces");function O(c){const l=Object(R.b)({label:"AUTH"}),d=Object(Ln.a)();c.filter(s.b).filter(f=>{const m=d[f];return!(m!=null&&m.is_unified_user_client_enabled)}).forEach(f=>{l.info(`Pending auth org ${f} successfully authed, removing from config and store`),Object(D.dispatchForClientStore)(Object(Zo.a)(f))})}v(O,"removeAddedOrgsFromPendingAuthWorkspaces");function S(c){const l=Object(Jt.getFocusedWorkspace)(Object(D.getStateForClientStore)());if(c===l||Object(me.a)(Object(D.getStateByTeamId)(l)))return;const d=Object(R.b)({label:"AUTH"});if(d.info("Not allowed to switch workspaces right now; seeing if closing a modal helps"),Object(D.dispatchForTeamId)(l,Object(oo.a)()),Object(me.a)(Object(D.getStateByTeamId)(l))){d.info("Closing a modal helped");return}throw d.info("Still not allowed to switch workspaces right now despite having closed a modal"),new Error("Not allowed to switch workspaces; we should reload instead")}v(S,"ensureWeCanFocusWorkspace");function A(c,l){const d=Object(D.getStateForClientStore)();if(!Object(Jt.didBootAllWorkspaces)(d)||c.removed.length>0||!l)return!1;const f=Object(Jt.getFocusedWorkspace)(d),m=l.params.teamId;return!(!Object(Dn.b)()&&m&&m!==f||c.areChangedTeamsIncompatible||Object(i.s)()&&c.isNoOp&&m&&Object(Jt.isWorkspaceExpired)(Object(D.getStateForClientStore)(),m))}v(A,"canIncrementallyHandleAuthChange");function H(c){let{reason:l=""}=c;Object(o.a)({reloadType:"auth_fetched_handler",reason:l})}v(H,"measureAuthReloadMetrics");var et=v(c=>{let{avoidReloadIfPossible:l,comparison:d,returnToUrl:f,preventPostAuthNavigation:m}=c;const h=Object(gt.a)();function T(k){let{reason:J}=k;return h.count("safh_reload"),H({reason:J}),Object(Jo.a)(f),Object(to.a)()}v(T,"navigateAndHalt"),h.count("safh_start");const C=Object(R.b)({label:"AUTH"}),G=Object(Xo.a)(f).pathname,L=Object(fe.a)(G,{throwOnNoRoute:!1});if(!l||!A(d,L))return l?h.count("safh_reload_requested"):h.count("safh_cannot_handle"),C.info(`Fetched auth but need to reload to handle the change; navigating to ${f}`),T({reason:"auth_reload_required"});C.info("Fetched auth and processing changes without reloading...");try{Object(sn.s)()}catch(k){return C.error(`Encountered an error while ingesting auth payload: ${k}`),T({reason:"auth_ingest_error"})}const ot=Object(Dn.b)()?g(d.added):zt.a.resolve();return j(d.changed),Object(Dn.b)()&&(E(d.pending),O(d.added)),ot.then(()=>{var k;return!m&&L?(S(L.params.teamId),Object(ue.h)(L.routeName,L.params,{reason:"Sonic authFetchedHandler"})):(C.info(`In addWorkspacePromises, added new workspace id ${L==null||(k=L.params)===null||k===void 0?void 0:k.teamId}, but preventPostAuthNavigation is true so not navigating to it`),null)}).then(()=>{h.count("safh_ok"),d.added.length>0&&h.count("safh_added"),d.changed.length>0&&h.count("safh_changed"),d.pending.length>0&&h.count("safh_pending"),d.isNoOp&&h.count("safh_noop"),C.info("Successfully processed auth changes without needing to reload")}).catch(k=>(C.error(`Encountered an error while processing auth changes: ${k}`),h.count("safh_error"),T({reason:"auth_processing_error"})))},"authFetchedHandler");let tt=!1;const W=Object(I.c)("installAuthHandler side effect handler",(c,l,d)=>{let{payload:f}=d;tt||f||(tt=!0,Object(R.b)().info("AUTH","Installing incremental auth handler"),Object(eo.k)(et))});W.meta={name:"createThunk",key:"createThunkinstallAuthHandler",description:"installAuthHandler side effect handler"};const x=Object(B.c)([Gt.a],W);Object.defineProperty({installAuthHandler:W,didInstallAuthHandler:tt},"didInstallAuthHandler",{get:()=>tt,set:c=>{tt=c}});var Nn=t("3l96"),Ht=t("g3FH"),he=t("C3vN"),ao=t("Cfcg"),It=t("YUBf"),ge=t("3V+Q"),cs=t("Ws5+"),os=t("qDEp"),ls=t("FUEd"),ds=t("F7a4");const ve=new Ft.b("presence"),us={closeModal:it.default.func,currentMemberPresence:it.default.oneOf([Ht.a,Ht.b]),prefConfirmUserMarkedAway:it.default.bool.isRequired,setUserPrefByApi:it.default.func,toggleUserPresence:it.default.func},fs={closeModal:Dt.a,currentMemberPresence:Ht.b,setUserPrefByApi:Dt.a,toggleUserPresence:Dt.a};let ro=v(class extends zn.Component{onGo(){const{currentMemberPresence:l}=this.props;l===Ht.b&&this.props.toggleUserPresence(),this.props.closeModal()}togglePref(l){this.props.setUserPrefByApi({pref:"confirm_user_marked_away",value:!l.target.checked})}render(){const{prefConfirmUserMarkedAway:l}=this.props,d="presence_prompt_checkbox";return $.a.createElement(It.a,{closeModal:this.props.closeModal},$.a.createElement(It.i,null,$.a.createElement(It.l,{title:ve.t("Set yourself to active?")})),$.a.createElement(It.d,{className:"p-presence_dialog__content"},$.a.createElement(It.e,null,$.a.createElement("span",null,ve.t("You're currently set to away, but it looks like you're back. Want to update your availability?")))),$.a.createElement(It.g,null,$.a.createElement(ge.b,{type:"inline",cursor:"pointer",htmlFor:d,text:ve.t("Don't ask again"),className:"margin_bottom_0"},$.a.createElement(cs.a,{id:d,checked:!l,onChange:this.togglePref})),$.a.createElement(It.h,null,$.a.createElement(os.f,{type:"outline",onClick:this.props.closeModal},ve.t("No Thanks")),$.a.createElement(os.f,{type:"primary",onClick:this.onGo},ve.t("Set to Active")))))}constructor(l){super(l),this.togglePref=this.togglePref.bind(this),this.onGo=this.onGo.bind(this)}},"PresencePromptDialog");ro.displayName="PresencePromptDialog",ro.propTypes=us,ro.defaultProps=fs;const ms=v(c=>({currentMemberPresence:Object(ls.b)(c),prefConfirmUserMarkedAway:Object(an.u)(c,"confirm_user_marked_away")}),"mapStateToProps"),hs=v(c=>({closeModal:function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return c(Object(oo.a)(...d))},setUserPrefByApi:function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return c(Object(qe.f)(...d))},toggleUserPresence:()=>c(Object(ds.a)())}),"mapDispatchToProps");var gs=Object(ao.a)(ms,hs)(ro);const Qo=Object(I.c)("Opens the presence prompt dialog",function(c,l){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};c(Object(Nn.a)({element:$.a.createElement(gs,d)}))});Qo.meta={name:"createThunk",key:"createThunkopenPresencePromptDialog",description:"Opens the presence prompt dialog"},Qo.propTypes=null;const Yo=Object(I.c)("Considers whether to open the presence prompt dialog",(c,l)=>{const d=l(),f=Object(R.a)({state:d,label:"PRESENCE_PROMPT"});if(!(Object(an.u)(d,"confirm_user_marked_away")===!0)){f.info("ignoring prompt due to pref");return}const h=Object(pt.c)(d),T=Object(he.o)(h);if(T!==Ht.b){f.info(`ignoring prompt due to presence (${T})`);return}if(!Object(In.l)(d)){f.info("ignoring prompt due to workspace focus state");return}f.info("displaying prompt"),c(Qo())});Yo.meta={name:"createThunk",key:"createThunkmaybeOpenPresencePromptDialog",description:"Considers whether to open the presence prompt dialog"},Yo.propTypes=null;const ss=Object(I.c)("presencePromptSideEffect side effect handler",(c,l,d)=>{let{payload:f}=d;Object(K.a)()&&(f||c(Yo()))});ss.meta={name:"createThunk",key:"createThunkpresencePromptSideEffectHandler",description:"presencePromptSideEffect side effect handler"};const vs=Object(B.c)([q.a],ss);var Os=t("pZ7i"),js=t("bYMc"),ys=t("MXQz"),as=t("opHY"),Ts=t("MIV3");const rs=Object(I.c)("Subscribe to data from desktop's redux store",Object(ys.a)(c=>{if(!Object(Rt.db)())return;const l=[];window.addEventListener("beforeunload",()=>l.forEach(f=>f()));const d=v(f=>Object(K.a)()?(Object(D.dispatchForClientStore)(f),Object(Ts.a)(f)):c(f),"dispatchToAllStores");["app","settings","environment","downloads"].forEach(f=>{l.push(Object(Rt.Pb)(f,m=>{d(Object(as.n)({[f]:m}))}))}),["isFocused","isVisible","isFullScreen","hasVibrancy","isCurrentlyAudible"].forEach(f=>{l.push(Object(Rt.Ec)(f,(m,h)=>{d(Object(as.o)({windowId:m,property:f,value:h}))}))})}));rs.meta={name:"createThunk",key:"createThunkinitializeDesktopSubscriptions",description:"Subscribe to data from desktop's redux store"};const Ss="DESKTOP-SIDE-EFFECT",is=Object(I.c)("Connect to desktop store",(c,l)=>{Object(i.i)()&&(Object(R.a)({getState:l}).info(Ss,"Creating desktop delegate"),c(Object(js.a)()),c(rs()))});is.meta={name:"createThunk",key:"createThunkconnectToDesktop",description:"Connect to desktop store"};const Cs=Object(B.c)([Os.a],is),Is=[...n.a,...P.a,Mt,To,p,kt,ho,Po,Je,en,Do,bo,Fo,Ro,Ho,we,po,no,x,vs,Z,Cs]},"46B2":function(Zt,e,t){"use strict";var n=t("SQ0V"),P=t("2gmk"),I=t("Tb6y"),D=t("YrcQ"),jt=t("PPwK"),B=t("H+FD"),ct=t("JmWg"),lt=t("g0+b"),Q=t("RBcp");const b=Object(n.c)("Sets muted channels from the prefs string",(M,at,w)=>{if(!w||!w.length)return;const N=w.split(",");if(!N.length)return;const rt={};N.forEach(V=>{rt[V]=!0}),M(Object(Q.b)(rt))});b.meta={name:"createThunk",key:"createThunksetMutedChannelsFromPrefs",description:"Sets muted channels from the prefs string"};var yt=t("WUSA"),Y=t("vQUN"),dt=t("qXUU"),Tt=t("BYea"),Et=t("o6MB"),Mt=t("Vy29"),p=t("vfQU"),Z=t("RhCq"),R=t("86MF"),K=t("Ukxe"),q=t("YkFH"),U=t("SQgE");const ut=Object(n.c)("Set model data in Redux stores based on response from client.boot",(M,at,w)=>{let{modelData:N,source:rt=q.b.ClientBootGeneric}=w;const{appHomesData:V,channelsData:st,starredChannels:dn,readOnlyChannels:St,threadOnlyChannels:Qt,userPrefsData:ft,userGroupMembershipData:Yt,enterpriseData:xt,enterprisePrefsData:Nt,paidFeatures:kt,emojiBootData:un,appCommandsCacheTs:fn,domainsBootData:z,channelsPriorityData:Ut}=N;M(Object(yt.j)(Object(p.jb)())),M(Object(Mt.c)(ft??{})),Object(U.c)(M,N),Object(U.b)(M,N),M(Object(I.a)({channels:st,source:rt})),dn&&M(Object(D.a)(dn)),St&&M(Object(jt.a)(St)),Qt&&M(Object(B.a)(Qt)),Object(U.a)(M,N),M(b(ft&&ft.muted_channels||"")),M(Object(lt.a)(ft&&ft.hidden_users||"")),M(Object(K.b)()),M(Object(K.a)({userGroups:Yt,isMember:!0})),V&&M(Object(P.a)(V)),xt&&M(Object(dt.t)({team:xt})),Nt&&M(Object(Z.d)({prefs:Nt})),M(Object(Tt.a)(kt||[])),un.cacheTs&&M(Object(Y.a)({serverCacheTs:un.cacheTs,caller:"setModelData"})),M(Object(U.d)(N)),fn&&M(Object(R.a)({cacheTs:fn,reason:"set-model-data"})),z&&M(Object(Et.a)({serverCacheTs:z.domains_ts})),Ut&&M(Object(ct.a)(Ut))});ut.meta={name:"createThunk",key:"createThunksetModelData",description:"Set model data in Redux stores based on response from client.boot"};var nt=e.a=ut},cEwB:function(Zt,e,t){"use strict";t.r(e),t.d(e,"register",function(){return oo}),t.d(e,"test",function(){return me});var n=t("9oTK"),P=t("Omjo"),I=t("8YMo"),D=t("0Gs4"),jt=t("qDv6"),B=t("Lgge"),ct=t("iZ9S"),lt=t("M/q2"),Q=t("s4P+"),b=t("vLZU"),yt=t("uUAy");let Y="3";const dt="persist:slack-persistence-method-version";function Tt(i){const o=Object(Q.b)();if(!Object(lt.a)("localStorage"))return o.info(b.C,"Not checking persistence storage method version because localStorage doesn't appear to be supported"),B.a.resolve();const s=`${dt}-${i}`,a=`${dt}-${Object(ct.e)()}-${i}`;let r=localStorage.getItem(a);if(!r){r=localStorage.getItem(s)||"0";try{localStorage.setItem(a,Y),localStorage.removeItem(s)}catch(u){o.error(`Error persisting persistence method version for ${i}: ${u}`)}}if(r!==Y){try{localStorage.setItem(a,Y)}catch(u){o.error(`Error persisting persistence method version for ${i}: ${u}`)}if(r==="1"&&Y==="2")o.info(b.C,`(${i}) Removing localStorage persistence data because it is now stored in IndexedDb`),localStorage.removeItem(`persist:${b.F}-${i}`);else if(r==="2"&&Y==="3"){o.info(b.C,`(${i}) Removing outdated persistence data because it is now stored key off of which gantry app you are using`);const u=`persist:${b.F}-${i}`;return yt.a.delete(u).catch(g=>{o.error(`Error removing persisted data "persist:${b.F}-${i}"`,g)})}}return B.a.resolve()}v(Tt,"checkForPersistenceMethodChanges");const Et={persistConfigKeyPrefix:b.F,persistNamespace:b.G,PERSISTENCE_METHOD_VERSION_PREFIX:dt,PERSISTENCE_METHOD_VERSION:void 0};Object.defineProperty(Et,"PERSISTENCE_METHOD_VERSION",{get:()=>Y,set:i=>{Y=i}});var Mt=t("46B2"),p=t("tvPe"),Z=t("/q5d"),R=t("KGIc"),K=t("ITco"),q=t("hh9c"),U=t("WZNR");function ut(i){let{store:o,contextualInfo:s}=i;const{experimentGroupOverrides:a,teamId:r}=s;if(a!=null&&a.all&&o.dispatch(Object(U.c)(a.all)),!r)return;const u=a==null?void 0:a[r];u&&o.dispatch(Object(U.c)(u))}v(ut,"dispatchExperimentOverrides");function nt(i,o,s){const{teamId:a}=s;Object(Q.b)().info("BOOT",`(${a}) Dispatching boot data`);const r=M(o,s);i.dispatch(Object(K.a)(r));const{config_version_ts:u,...g}=o.experimentData;i.dispatch(Object(q.a)(g)),ut({store:i,contextualInfo:s})}v(nt,"dispatchBootData");function M(i,o){const{featureFlagData:s}=i,a=i.clientBootData,{should_reload:r,client_min_version:u,acceptTosUrl:g,isEurope:j,selfData:E,hidden_messages_count:O}=a,S=i.allEnterpriseData,{enterpriseBootData:A}=S,H=i.allOnboardingData,{onboardingData:F,labFeaturesStartupData:et}=H,{featureFlagURLOverrides:tt,userId:W}=o,x={...s,...tt};return{app:"client",user_id:W,user_team_id:E==null?void 0:E.team_id,version_uid:Object(R.h)(),acceptTosUrl:g,isEurope:j,onboardingData:F,labFeaturesStartupData:et,should_reload:r,client_min_version:u,hidden_messages_count:O,...A||{},...x}}v(M,"extractBootData");var at=t("0/8Q"),w=t("fMrX"),N=t("3qeY"),rt=t("IXqM"),V=t("1XAL"),st=t("xwCZ"),dn=t("C3vN"),St=t("aHgF");function Qt(i){let{store:o,onboardingData:s}=i;const a=o.getState(),r=Object(rt.d)(a),u=Object(St.d)(a),g=Object(St.e)(a),j=s==null?void 0:s.use_case_onboarding_selection;if(!(u||g)||!(j!=null&&j.length))return;const O=j.split("|"),S=new Date().getTime()/1e3,A=5*60;var H;const F=(H=Object(dn.i)(Object(st.c)(a)))!==null&&H!==void 0?H:-1;F>0&&F+A>S&&o.dispatch(Object(N.a)(Object(V.g)(r,O)))}v(Qt,"maybeSetJoinerUseCaseOnboardingTabs");function ft(i){let{apiData:o,store:s}=i;const a=o.allOnboardingData,{labFeaturesStartupData:r,onboardingData:u}=a;if(r){var g;s.dispatch(Object(at.a)((g=r.emailClassification)===null||g===void 0?void 0:g.enabled))}u&&(s.dispatch(Object(w.c)({...u})),Qt({onboardingData:u,store:s}))}v(ft,"dispatchOnboardingData");var Yt=t("IaLB"),xt=t("q0lC"),Nt=t("rkcT"),kt=t("28Q5"),un=t("3bak"),fn=t("JKBA"),z=t("GBet"),Ut=t("cQw7"),it=t("RVJP"),qt=t("J/RB"),wt=t("hwuj"),gt=t("6TCl"),io=t("ULs5"),Wn=t("rxiy"),Pt=t("jJ7u"),Oe=t("toaU"),mn=t("KiUf"),je=t("bczA"),ye=t("QcWC"),pn=t("I0j/"),Ct=t("37+L"),Wt=t("v5z3"),mt=t("p/ji"),hn=t("Lsy7"),gn=t("48NQ"),At=t("44Rm"),_t=t("7ip2"),Te=t("83nZ");function qo(i){let{apiData:o,store:s,contextualInfo:a,routeInfo:r}=i;const{viewData:u}=o,g=s.getState(),j=Object(Nt.b)({store:s,shouldSetFocus:!0}),E=Object(Nt.c)(o.clientBootData.teamData.id),O=Dt({apiData:o,contextualInfo:a,store:s,currentView:j,lastRouteFromLocalConfig:E});let S=!1;O||(S=s.dispatch(Object(hn.b)({currentView:j,lastRouteFromLocalConfig:E}))),O?_t.j[O]?s.dispatch(Object(pn.a)(Object(Ct.X)(_t.j[O]))):s.dispatch(Object(pn.a)(Object(Ct.n)(O))):co(u)&&!S?pt({viewData:u,store:s,contextualInfo:a,routeInfo:r}):r&&!S&&s.dispatch(Object(mn.b)({routeName:r&&r.routeName,params:r&&r.params})),Object(mt.o)(g)&&s.dispatch(Object(At.a)())}v(qo,"dispatchViewData");function Dt(i){let{apiData:o,store:s,currentView:a,lastRouteFromLocalConfig:r}=i;var u;const g=s.getState(),{clientBootData:{teamData:j},allOnboardingData:E}=o;let O="";if(Object(ye.a)(g))return;const S=((u=E.onboardingData)===null||u===void 0?void 0:u.joiner_launchpad_onboarding_complete)===!1&&Object(mt.i)(g);S?((Object(mt.k)(g,!0,!1,!0)||Object(mt.j)(g,!0,!1,!0))&&s.dispatch(Object(Te.a)({pref:mt.c,value:!0})),O=Wt.b,s.dispatch(Object(Te.a)({pref:"joiner_launchpad_onboarding_complete",value:!0}))):Object(mt.n)(g)&&(O=Wt.b);const A=Object(Yt.gb)(g),H=Object(Yt.hb)(g);A&&(O=A),H&&(O=H);const F=Object(gn.e)(g,!1,Object(hn.c)(Object(gn.b)(g)));return!H&&Object(kt.f)(g)&&!Object(xt.h)(g)&&!a&&!r&&!(S||Object(mt.n)(g)||Object(mt.i)(g))&&!F&&j.onboarding_channel_id&&(O=j.onboarding_channel_id),O}v(Dt,"maybeGetOnboardingView");function pt(i){let{viewData:o,store:s,contextualInfo:a,routeInfo:r}=i;const{teamId:u}=a,{messagesData:g,membersData:j,botsData:E}=o,O=g.channelId,S={...g,msgs:s.dispatch(Object(Ut.a)({imsgs:g.msgs,channelId:O,trustReactions:!0}))},A=s.getState(),H=Object(st.b)(A),F=(j||[]).filter(W=>{let{id:x}=W;return!(H!=null&&H[x])});if(s.dispatch(Object(un.a)({members:F})),s.dispatch(Object(z.a)({bots:E})),Object(it.d)(s.getState(),"channel_eventlog_fe_skip_message_events")==="on"&&o.mutationTimestampsData){Object(Q.b)().info("BOOT",`(${u}) processing mutation timestamps for ${O}`),s.dispatch(Object(io.a)({channelId:O,newHistoryInvalidTs:o.mutationTimestampsData.history_invalid,newUpdatedTs:o.mutationTimestampsData.updated}));const W=Object(wt.a)(A,O),x=Object(wt.b)(A,O);(!W||W<o.mutationTimestampsData.history_invalid)&&s.dispatch(Object(gt.b)({channelId:O,historyInvalidTs:o.mutationTimestampsData.history_invalid})),(!x||x<o.mutationTimestampsData.updated)&&s.dispatch(Object(gt.c)({channelId:O,updatedTs:o.mutationTimestampsData.updated}))}if(s.dispatch(Object(qt.a)(S)),j&&j.length&&u&&Object(fn.c)(u,j.map(W=>W.id)),o.channelActionsData&&s.dispatch(Object(Wn.a)(o.channelActionsData)),!Object(je.c)(s.getState())){var et,tt;const W=(et=r)===null||et===void 0?void 0:et.routeName,x=((tt=r)===null||tt===void 0?void 0:tt.params)||{};s.dispatch(Object(mn.b)({routeName:!r||W===Oe.a?Pt.b:W,params:{...x,entityId:g.channelId}}))}}v(pt,"dispatchMessagesView");function co(i){var o;return!!(!((o=i.messagesData)===null||o===void 0)&&o.channelId)}v(co,"isChannelInitialView");var Se=t("xFgo"),Ce=t("NgZ7"),Vt=t("MDWk"),Ie=t("/Q7G");const vn=v(i=>!Object(Vt.a)(Object(Ie.a)(i)),"isDownloadAppPromptShowable");var On=t("1Wxh"),Vn=t("kBpe"),$t=t("2XU3"),jn=t("WCk1");const Ee=Object(jn.a)("Trigger Slackbot channel suggestions (if any available)",i=>i(Object($t.apiCall)({method:"conversations.suggestions",args:{},reason:"conversations-suggestions"})));Ee.meta={name:"createFetcher",key:"createFetcherconversationsSuggestions",description:"Trigger Slackbot channel suggestions (if any available)"};var wo=t("G5NC"),lo=t("BEaa"),Me=t("SQ0V"),$n=t("4hjS");const bt=Object(Me.c)("Trigger Slackbot channel suggestions (if any available)",(i,o)=>{const s=Object(lo.a)(75,-.6,.6);setTimeout(()=>{const a=o();Object(wo.a)()&&!Object($n.l)(a)||i(Ee())},s*1e3)});bt.meta={name:"createThunk",key:"createThunkmaybeSendConversationsSuggestions",description:"Trigger Slackbot channel suggestions (if any available)"};var yn=bt,Pe=t("qiCS"),_o=t("beVI"),Ae=t("G0eX");function uo(i){let{store:o,routeInfo:s}=i;var a;Object(kt.e)(o.getState())&&!Object(Vn.i)()&&o.dispatch(Object(K.a)({...o.getState().bootData,userSawNotificationsBanner:Object(On.a)()&&vn(o.getState())})),o.dispatch(yn());const r=Object(_o.g)(o.getState()),u=!Object(Ae.J)(r),g=Object(kt.f)(o.getState())&&Object(Ce.a)(o.getState(),"setup_flow_step")===Wt.p.Completed&&Object(xt.h)(o.getState()),j=(s==null||(a=s.params)===null||a===void 0?void 0:a.entityId)===Wt.n.Tada&&g;if(s.params.entityId==="paid-benefits"){const E=["email_trial_activation_day_zero","trial_seven_day_reminder","trial_seven_day_reminder_revamp"],O=Object(Pe.f)(window.location.href).entry_point;if(E.includes(O))return}(u&&g||j)&&o.dispatch(Object(Se.a)({redirectId:Object(Yt.p)(o.getState())}))}v(uo,"dispatchOnboardingViewData");var Tn=t("IaBJ"),Gn=t("YkFH");function fo(i,o,s){return Gt.apply(this,arguments)}v(fo,"dispatchApiData");function Gt(){return Gt=Object(n.coroutine)(function*(i,o,s){Object(P.b)("BOOT",`(${s.teamId}) Dispatching API data`),nt(i,o,s);const a=yield s.isBootingWarm,r=mo(o);i.dispatch(Object(Mt.a)({modelData:r,source:a?Gn.b.ClientBootWarmBoot:Gn.b.ClientBootColdBoot}));const u=o.clientBootData,{teamData:g}=u;u.unchangedChannelIds&&i.dispatch(Object(Tn.t)({teamId:g.id,unchangedChannelIds:u.unchangedChannelIds,unchangedChannelsJoinedIds:u.unchangedChannelIds}));const j=yield Object(Z.a)({contextualInfo:s,channels:u.channelsData});g.acquisition_source&&i.dispatch(Object(p.a)(g.acquisition_source)),ft({apiData:o,contextualInfo:s,store:i}),qo({apiData:o,contextualInfo:s,store:i,routeInfo:j}),uo({apiData:o,contextualInfo:s,store:i,routeInfo:j})}),Gt.apply(this,arguments)}v(Gt,"_dispatchApiData");function mo(i){const o=i.clientBootData,{appHomesData:s,accountTypes:a,channelsData:r,starredChannels:u,readOnlyChannels:g,threadOnlyChannels:j,teamData:E,selfData:O,userPrefsData:S,teamPrefsData:A,userGroupMembershipData:H,paidFeatures:F,emojiBootData:et,appCommandsCacheTs:tt,domainsBootData:W,workspaces:x,defaultWorkspace:so,channelsPriorityData:Nn,unchangedChannelIds:Ht}=o,he=i.allEnterpriseData,{enterpriseData:ao,enterprisePrefsData:It}=he,ge={appHomesData:s,accountTypes:a,channelsData:r,starredChannels:u,readOnlyChannels:g,threadOnlyChannels:j,teamData:E,selfData:O,userPrefsData:S,teamPrefsData:A,userGroupMembershipData:H,paidFeatures:F,emojiBootData:et,appCommandsCacheTs:tt,domainsBootData:W,workspaces:x,defaultWorkspace:so,channelsPriorityData:Nn,unchangedChannelIds:Ht};return ao&&(ge.enterpriseData=ao),It&&(ge.enterprisePrefsData=It),ge}v(mo,"extractModelData");var Sn=t("mard"),ho=t("vATg"),De=t("IJpL"),Kn=t("ycWl"),go=t("1G0c"),zn=t("fujP"),$=t("Z7Ay"),Ft=t("j77i"),vo=t("pR3f"),Oo=t("vGg+");const jo=Object(Q.b)();function be(i){let{teamId:o,reducerConfig:s,state:a={}}=i;return Object.keys(s).some(r=>{const u=s[r],g=Object(b.A)(u)&&(a[r]===null||a[r]===void 0);return g&&jo.info(b.C,`(${o}) Not using persisted model because ${r} is required and empty`),g})}v(be,"checkForMissingRequiredReducers");var Xn=t("v6mS"),Fe=t("69+H"),Re=t("PLUl"),Be=t("NLR5");const He="process-stored-state";function Le(){let{teamId:i,enterpriseId:o,method:s,storeKey:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=Object(Re.a)(),u=r.createMetricsTrace({label:"redux-persistence"});u.count({name:"store-invalidated"}).addTags({team_id:i,enterprise_id:o,method:s,store:a}),r.reportTrace(u)}v(Le,"beaconStoreInvalidation");function yo(i){let{state:o,logger:s,teamId:a,reducerConfig:r={},storedPersistenceHashes:u={},currentPersistenceHashes:g={}}=i;const j={},E=Object(Ft.i)(a,"enterprise_id");return Object.keys(o).forEach(O=>{const S=r[O],{persistenceEnabled:A=!1,persistImmediately:H=!1,scope:F,afterReadTransform:et,validateFn:tt}=Object(b.u)(S)||{};if(!A||H)return;const W=u[O],x=g[O];if(x!==W&&W&&x){if(O==="members"){const he=Object(Ft.i)(a,"versionDataTs");s.error("members_dropped",`currentHash:${x} persistedHash:${W} versionDataTs:${he}`)}Le({teamId:a,enterpriseId:E,method:"propTypes",storeKey:O}),s.info(b.C,`${O} store's shape has changed, throwing away persisted data for it. New hash ${x} doesn't equal old hash ${W}`);return}const so=!1,Nn=`${b.l}${O}`;if(Object(Fe.a)(Nn)&&!Object(Fe.b)(Nn,o[O],{logErrorOnFailure:so})){Le({teamId:a,enterpriseId:E,method:"schema",storeKey:O}),s.info(b.C,`${O} persisted data does not pass schema validation, throwing away persisted data for it`);return}if(tt&&!tt(o[O])){Le({teamId:a,enterpriseId:E,method:"validateFn",storeKey:O}),s.info(b.C,`${O} persisted data does not pass validateFn validation, throwing away persisted data for it`);return}const Ht=E&&Object(b.B)({scope:F})?E:a;j[O]=et?et(o[O],Ht):o[O]}),j}v(yo,"prepareStateForHydration");function Ne(i){return Cn.apply(this,arguments)}v(Ne,"processStoredState");function Cn(){return Cn=Object(n.coroutine)(function*(i){let{teamId:o,reducerConfig:s,storedState:a={}}=i;const r=Object(Q.a)({teamId:o});r.info(b.C,"Checking for persistence method changes"),yield Tt(o),r.info(b.C,"Preparing state for hydration");const u=a&&(a==null?void 0:a.persistenceHashes),g=yo({state:a||{},teamId:o,logger:r,reducerConfig:s,storedPersistenceHashes:u,currentPersistenceHashes:Object(vo.b)({...s,persistenceHashes:Oo.a},o)});return!g||Object(zn.a)(g)?(r.info(b.C,"No persisted state found"),null):(r.info(b.C,"State prepared for hydration"),r.info(b.C,"Checking for required data"),be({teamId:o,reducerConfig:s,state:g})?(r.info(b.C,"Missing some required data, throwing away persisted state"),Object(Be.a)({successState:!1,spanName:`${He}:missing-required-reducers`}),null):g)}),Cn.apply(this,arguments)}v(Cn,"_processStoredState"),Object($.a)("persist.processStoredState",function(){var i=Object(n.coroutine)(function*(o,s){const a=Object(b.t)(o),r=yield Object(Xn.a)({teamId:o,userId:s});return Ne({teamId:o,reducerConfig:a,storedState:r})});return function(o,s){return i.apply(this,arguments)}}());function To(i){return Jn.apply(this,arguments)}v(To,"setInitialState");function Jn(){return Jn=Object(n.coroutine)(function*(i){let{contextualInfo:o}=i;const s=yield o.isBootingWarm,{teamId:a}=o;if(!s)return Object(P.b)("BOOT",`(${a}) Booting with empty store`),Ue({contextualInfo:o,storedState:{}});Object(P.b)("BOOT",`(${a}) Booting with persisted store`);try{if(!a)throw new Error("Attempt to calculate initial state failed because teamId is missing.");const r=yield o.maybeStoredStatePromise,u=yield Ne({teamId:a,reducerConfig:D,storedState:r});return Ue({contextualInfo:o,storedState:u})}catch(r){return Object(ho.a)(o==null?void 0:o.teamOrEnterpriseBootId,go.a,Kn.a,r),Object(Sn.a)()}}),Jn.apply(this,arguments)}v(Jn,"_setInitialState");function Ue(i){return Zn.apply(this,arguments)}v(Ue,"buildInitialState");function Zn(){return Zn=Object(n.coroutine)(function*(i){let{contextualInfo:o,storedState:s}=i;const{teamId:a="",featureFlagURLOverrides:r,userId:u}=o;if(!s)return Object(Kn.a)({reason:"maybeStoredStatePromise didn\u2019t resolve to any stored state",reasonKey:"warm_boot_without_stored_state",immediate:!0}),Object(Sn.a)();var g;const j={...s,bootData:{...(g=s.bootData)!==null&&g!==void 0?g:{},...r,version_ts:Object(R.f)()}};return Object(De.c)({teamId:a,userId:u,reducerConfig:D,state:j})}),Zn.apply(this,arguments)}v(Zn,"_buildInitialState");var We=t("eahn"),So=t("3q8y"),Qn=t("lhZz"),Yn=t("SZMM");function Co(i){return xn.apply(this,arguments)}v(Co,"populateTeamDebugger");function xn(){return xn=Object(n.coroutine)(function*(i){let{contextualInfo:o}=i;const{teamId:s}=o;if(!s)return{contextualInfo:o};Object($.c)(s,"openGantryApp",function(){for(var u=arguments.length,g=new Array(u),j=0;j<u;j++)g[j]=arguments[j];return Object(Qn.dispatchForTeamId)(s,Object(Yn.h)(...g))});const a=Object(Ft.i)(s,"url"),r=a?a.match(/^https:\/\/([^.]+)\./):null;if(r&&r[1]){const u=r[1];Object($.b)(`teams.${u}`,()=>window.slackDebug[s])}return{contextualInfo:o}}),xn.apply(this,arguments)}v(xn,"_populateTeamDebugger");var pe=t("TVjB");function Io(i){return In.apply(this,arguments)}v(Io,"initialEmojiTranslationLoad");function In(){return In=Object(n.coroutine)(function*(i){let{contextualInfo:o}=i;return Object(pe.a)(),{contextualInfo:o}}),In.apply(this,arguments)}v(In,"_initialEmojiTranslationLoad");function Ve(i){return kn.apply(this,arguments)}v(Ve,"fetchAdditionalMembers");function kn(){return kn=Object(n.coroutine)(function*(i){let{clientBootData:o,store:s}=i;const a=s.getState(),r=Object(st.b)(a),u=((o==null?void 0:o.membersToFetch)||[]).filter(g=>!(r!=null&&r[g]));Object(st.j)(a,u)}),kn.apply(this,arguments)}v(kn,"_fetchAdditionalMembers");var $e=t("mkcb");function vt(i){return qn.apply(this,arguments)}v(vt,"setBootTypeForTeam");function qn(){return qn=Object(n.coroutine)(function*(i){let{store:o,contextualInfo:s}=i;const{isBootingWarm:a}=s,r=(yield a)?"warm":"cold";return o.dispatch(Object($e.d)({bootType:r})),{store:o,contextualInfo:s}}),qn.apply(this,arguments)}v(qn,"_setBootTypeForTeam");var Ge=t("GlHf");function Eo(i){return En.apply(this,arguments)}v(Eo,"setFocus");function En(){return En=Object(n.coroutine)(function*(i){let{store:o,contextualInfo:s}=i;const r=Object(Qn.getClientStoreInstance)().getState(),u=Object(Ge.h)(r);return u&&o.dispatch(Object($e.f)(u)),{store:o,contextualInfo:s}}),En.apply(this,arguments)}v(En,"_setFocus");var tn=t("KAPZ"),nn=t("xnu4"),Mn=t("9Gfp"),Mo=t("nNoG"),wn=t("wwBm");function Kt(i){return Pn.apply(this,arguments)}v(Kt,"validateLocaleAccess");function Pn(){return Pn=Object(n.coroutine)(function*(i){let{contextualInfo:o,store:s}=i;const{teamId:a}=o,r=s.getState(),u=Object(Mn.f)(r),g=Object.keys(u).reduce((S,A)=>({...S,[Object(nn.a)(A)]:u[A]}),{}),j=Object(Mo.i)(g),E=Object(wn.d)(window.location.search),O=E.locale||"";return!j[O]&&Object.keys(E).includes("locale")?(Object(P.b)("BOOT",`team ${a} attempted to boot into locale ${O} which has not been enabled; clearing credentials and reloading app`),Object(Ft.u)(),window.location.href=Object(Pe.b)(window.location.href,"locale"),Object(Sn.a)()):{store:s,contextualInfo:o}}),Pn.apply(this,arguments)}v(Pn,"_validateLocaleAccess");var Ke=t("RU1E"),ze=t("6y7U"),Xe=t("uNaj"),_n=t("XIp8"),te=t("vFlG"),ne=t("6LIB"),Po=t("oaNE"),Je=t("Zbwg"),y=t("2VFn"),X=t("uiBO"),en=t("j9WB"),ht=t("OCIX"),An=t("6dQg"),ee=t("O86Y"),Ao=t("AFNo"),Ze=t("HSr9");const on=Object(Ao.c)((i,o)=>{var s;if(!o.primary)return!1;const a=Object(Ze.a)(i,o.primary);return a&&((s=Object(ee.e)(i))===null||s===void 0?void 0:s.includes(a))||!1});on.meta={name:"createSelector",key:"createSelectorisValidExternalWorkspaceForEventView",description:(i,o)=>{var s;if(!o.primary)return!1;const a=Object(Ze.a)(i,o.primary);return a&&((s=Object(ee.e)(i))===null||s===void 0?void 0:s.includes(a))||!1}};var _=t("5eP/");function Qe(i,o,s,a){var r;if(((r=o[_.b].sidebar)===null||r===void 0?void 0:r.viewType)!==y.l.main[_.b].sidebar.viewType)return!1;const u=a==null?void 0:a.entityId;if(!u)return!0;if(u==="lists")return!1;if(Object(Je.a)(u)){var g;const F=o[y.a];if(F!==y.f.Home&&F!==_.b||((g=o[F].primary)===null||g===void 0?void 0:g.id)!==u)return!1;if(Object(ht.a)(a==null?void 0:a.threadId)){var j,E,O;if(((j=o[F].secondary)===null||j===void 0?void 0:j.viewType)!==X.c.Thread||a.threadId!==((E=o[F].secondary)===null||E===void 0||(O=E.params)===null||O===void 0?void 0:O.threadId))return!1}if(Object(An.a)(a==null?void 0:a.fileId)){var S,A,H;if(((S=o[F].secondary)===null||S===void 0?void 0:S.viewType)!==X.c.FileDetails||a.fileId!==((A=o[F].secondary)===null||A===void 0||(H=A.params)===null||H===void 0?void 0:H.fileId))return!1}return!(a.timestamp||F===_.b&&!on(i,o[_.b]))}return Object(en.e)(u)?o[y.a]===u:!1}v(Qe,"isViewStateCompatibleWithRoute");var Ye=t("v7mh"),xe=t("QKJg"),ke=t("xcHN"),Do=t("l1I1"),bo=t("eUIW"),Fo=t("E3dU"),Ro=t("KAVK"),Rt=t("i/F/"),Bo=t("bJfW"),oe=t("mZIY"),Ho=t("1A7L"),ts=t("goBh"),Dn=t("z4cG"),sn=t("6qYK"),an=t("OaiI"),qe=t("TPEe"),se=t("SBOy"),we=t("2vQQ");function ns(i){return bn.apply(this,arguments)}v(ns,"setViewStateFromRouteInfo");function bn(){return bn=Object(n.coroutine)(function*(i){let{teamId:o,isForegroundTeam:s,routeName:a,routeParams:r,store:u}=i;const g=u.getState(),j=Object(Ft.i)(o,"lastViewState"),E=Object(Ye.j)(g),O=j??E;let S=_e(y.l.main,O),A=S[y.a]||y.f.Home;if(s&&!Qe(g,S,a,r)&&(r!=null&&r.entityId)){if(Object(Je.a)(r.entityId)){const F=Object(Ho.a)(g,r.entityId);A=F?_.b:y.f.Home,S[A]={[y.k.Sidebar]:F?y.l.main[_.b][y.k.Sidebar]:{id:X.c.ChannelList,viewType:X.c.ChannelList},[y.k.Primary]:{id:r.entityId,viewType:X.c.Channel,params:{startTs:r.timestamp},uiState:{[r.entityId]:{highlightTs:r.timestamp}}}},r.threadId&&Object(ht.a)(r.threadId)?S[A][y.k.Secondary]={id:"thread",viewType:X.c.Thread,params:{threadId:r.threadId,replyTs:r.replyTs}}:[Pt.F,Pt.y].includes(a)&&Object(bo.a)(r.memberId)?S[A][y.k.Secondary]={id:a===Pt.F?"user_profile":"rimeto_profile",viewType:X.c.Profile,params:{memberId:r.memberId}}:a===Pt.k&&r.fileId&&Object(An.a)(r.fileId)&&(S[A][y.k.Secondary]=Object(Ct.C)(r.fileId))}if(Object(Do.a)(r.entityId)&&(A=y.f.Home,S[y.f.Home]={[y.k.Sidebar]:{id:X.c.ChannelList,viewType:X.c.ChannelList},[y.k.Primary]:Object(Ct.k)({id:r.entityId})},r.threadId&&Object(ht.a)(r.threadId))){const{channelId:F,quipCommentThreadId:et}=Object(ke.a)(r.threadId);F&&et&&(S[y.f.Home][y.k.Secondary]=Object(Ct.eb)({channelId:F,commentThreadId:et,highlightTs:r.replyTs?r.replyTs:void 0}))}if(Object(Bo.a)(r.entityId)&&Object(oe.b)(g,r.entityId)&&(A=_.b,S[_.b]={[y.k.Sidebar]:y.l.main[_.b][y.k.Sidebar],[y.k.Primary]:Object(ts.d)(r.entityId,r.externalWorkspacePage)}),Object(en.e)(r.entityId)&&(A=r.entityId),Object(we.k)(r.entityId)&&r.entityId==="paid-benefits"){const F=Object(we.e)(r.entityId);S[A][y.k.Primary]=Object(Ct.X)(F.id)}if(on(g,S[_.b])||(S[_.b]=y.l.main[_.b],S[y.a]===_.b&&(A=y.f.Home)),r.entityId==="lists")if(Object(an.isListsEnabled)(g)){if(r.listsViewName){A=y.f.Lists;const F={[y.k.Sidebar]:{id:X.c.MoreListsSidebar,viewType:X.c.MoreListsSidebar}};S[y.f.Lists]={...Object(an.isListsMyItemsEnabled)(g)&&F,[y.k.Primary]:Object(Ct.P)({listId:r.listsViewName,listViewId:r.listViewId})}}}else A=y.f.Home}if(S[y.a]=A,!S[y.f.Home][y.k.Primary]){const F=Object(Rt.a)({channels:Object(Fo.b)(u.getState()),selfId:Object(Mn.a)(u.getState())});F&&(S[y.f.Home]={[y.k.Sidebar]:{id:X.c.ChannelList,viewType:X.c.ChannelList},[y.k.Primary]:{id:F,viewType:X.c.Channel}})}S=Lo(S,g);const{viewSet:H}=yield u.dispatch(Object(qe.a)({context:se.a.ClientBoot,nextViewSet:S[A],windowId:y.e}));return H&&(S[A]=H),u.dispatch(Object(xe.f)(S)),s&&u.dispatch(Object(Ro.a)({windowId:y.e,entry:S})),S[y.f.Home][y.k.Primary]?!0:(Object(Q.a)({getState:u.getState}).error("BOOT","failed to set initial view state"),!1)}),bn.apply(this,arguments)}v(bn,"_setViewStateFromRouteInfo");function _e(i,o){const s=Object(_n.a)(i);return Object.keys(s).forEach(a=>{Object(te.a)(o,a)&&(Object(ne.a)(s[a])&&Object(ne.a)(o[a])?(Object(en.a)(a)&&a===y.f.SalesHome||Object(Po.a)(s[a],o[a]),Object(en.a)(a)&&!i[a][y.k.Sidebar]&&(s[a][y.k.Sidebar]=void 0)):a===y.a&&Object(en.a)(o[a])&&(s[a]=o[a]))}),s}v(_e,"getMergedViewStateWithExistingKeysOnly");function Lo(i,o){const s=Object(Dn.a)(o),a=Object(sn.g)(o),r=Object(_n.a)(i);return(s||a)&&(r[y.f.People]={...i[y.f.People],[y.k.Sidebar]:{id:X.c.MorePeopleSidebar,viewType:X.c.MorePeopleSidebar}}),Object(an.isListsMyItemsEnabled)(o)&&(r[y.f.Lists]={...i[y.f.Lists],[y.k.Sidebar]:{id:X.c.MoreListsSidebar,viewType:X.c.MoreListsSidebar}}),r}v(Lo,"maybeShowSidebarForTabs");function ae(i){return re.apply(this,arguments)}v(ae,"maybeUpdateRouteAndNavigate");function re(){return re=Object(n.coroutine)(function*(i){let{store:o,contextualInfo:s}=i;const{teamId:a,isForegroundTeam:r}=s;if(!a)throw new Error("missing team id, cannot update route");const u=Object(Xe.a)(window.location.pathname,{throwOnNoRoute:!1});yield ns({teamId:a,isForegroundTeam:r,routeName:u==null?void 0:u.routeName,routeParams:u==null?void 0:u.params,store:o})}),re.apply(this,arguments)}v(re,"_maybeUpdateRouteAndNavigate");var No=t("MXQz"),Fn=t("UXvI");let rn=!1;const cn=v(i=>{var o;if(!i)return;let s="";const a=i.srcElement||i.target,r=Q.b&&Object(Q.b)();if(a&&a.nodeName){if(a.nodeName==="SCRIPT"){const j=a.src;s=`[${i.type||"error"}] from script at ${j} (failed to load?)`}else if(a.nodeName==="IMG"){const j=a.src||a.currentSrc||"unknown";r.warn(`<img> fired error with url = ${j}`);return}}if(i.message==="ResizeObserver loop limit exceeded"||i.message==="ResizeObserver loop completed with undelivered notifications"){r.warn("ResizeObserver observation target modified in handler");return}if(i.message==="can't access dead object"||i.message==="rambox is not defined")return;if(i.error&&i.error.stack&&(s+=` ${i.error.stack}`),i.filename){const j=i.filename,E=i.lineno,O=i.colno;s+=` from ${j}`,E&&(s+=` @ line ${E}, col ${O}`)}let u;if(i.error&&i.error.stack?u=s:u=`${i.message||""} ${s}`,u&&u.replace&&(u=u.replace(/\s+/g," ").trim()),!u||!u.length)if(a){const j=a.nodeName||"unknown";if(j==="VIDEO")return;u=`error event from node of ${j}, no message provided?`}else u="error event fired, no relevant message or node found";u=`\u{1F41E} ${u}`;const g=((o=i.error)===null||o===void 0?void 0:o.subtype)||"js_runtime_error";Rn({error:i.error||i,msg:u,subtype:g})},"globalErrorHandler");function Rn(i){const{error:o,msg:s,subtype:a}=i,r={subtype:a};Object(Q.b)().error(o,s,r)}v(Rn,"logError");var Wo=v(i=>{const o=i||window;if(rn)return;o.bootGlobalErrorHandler&&(o.removeEventListener("error",o.bootGlobalErrorHandler,!0),o.removeEventListener("unhandledrejection",o.bootGlobalUnhandledRejectionHandler),delete o.bootGlobalErrorHandler,delete o.bootGlobalUnhandledRejectionHandler);const s=!0,a=Object(Fn.a)(cn,1e4);o.addEventListener("error",a,s),o.addEventListener("unhandledrejection",r=>{var u;const g=r==null||(u=r.detail)===null||u===void 0?void 0:u.reason;g&&g instanceof Error&&(g.constructor!==Error||g.subtype)&&cn({error:g,filename:"promise_rejection"})}),rn=!0},"registerGlobalErrorHandler");const ie={globalErrorHandler:cn};Object.defineProperty(ie,"logError",{get:()=>Rn,set:i=>{Rn=i}}),Object.defineProperty(ie,"hasRegisteredGlobalErrorHandler",{get:()=>rn,set:i=>{rn=i}});var po=t("Pw4T");let zt=!1;const Bn=v(()=>{const i=Object(po.a)(),o=Object(Q.b)();i.count(`${Object(ct.e)()}_beforeunload`),o.info("RELOAD","Page is about to unload. This might not be a reload, it could be a window close or navigation")},"globalBeforeunloadHandler");var Vo=v(()=>{zt||(window.addEventListener("beforeunload",Bn),zt=!0)},"registerGlobalBeforeunloadHandler");Object.defineProperty({globalBeforeunloadHandler:Bn},"hasRegisteredGlobalBeforeunloadHandler",{get:()=>zt,set:i=>{zt=i}});var Go=t("qOjI");const Ko=Object(No.a)(to);function to(){Wo(),Vo(),Object(Go.a)()}v(to,"registerEventHandlersInner");var zo=t("LqbL"),Hn=t("7xYR");function ce(i){return le.apply(this,arguments)}v(ce,"maybeSetWorkspaceBooted");function le(){return le=Object(n.coroutine)(function*(i){let{store:o,apiData:s,contextualInfo:a}=i;const{teamId:r}=a,u=Object(Qn.getClientStoreInstance)(),g=u.getState();return!r||Object(Hn.hasWorkspaceFailedToBoot)(g,r)?{store:o,contextualInfo:a,apiData:s}:(u.dispatch(Object(zo.setWorkspaceBooted)(r)),{store:o,contextualInfo:a,apiData:s})}),le.apply(this,arguments)}v(le,"_maybeSetWorkspaceBooted");var de=t("pZ7i"),no=t("Muja"),Bt=t("9zMb"),eo=t("m5HF"),Xo=t("zm5I"),Jo=t("Cgcc"),Ln=t("mNau"),ln=t("8Bjr"),Xt=t("T1zM");function Jt(i){let{store:o}=i;const s=o.getState(),a=Object(Bt.v)(s),r=Object(Ln.c)(s,!1),u=Object(eo.b)(s),g=Object(Xo.a)(s),j=Object(eo.c)(s);let E;if(r&&!Object(zn.a)(r)){if(a&&(Object(no.a)(r,Object(Bt.p)())||Object(no.a)(r,Bt.e))){const S=a;E=Object(Bt.p)(S),o.dispatch(Object(ln.a)(E))}const O=Object(Bt.k)(r);((O==null?void 0:O.id)==="tritanopia"||(O==null?void 0:O.id)==="protanopia-and-deuteranopia")&&(O==null?void 0:O.brightness)!==(r==null?void 0:r.brightness)&&(o.dispatch(Object(ln.a)({...O.colors,brightness:O.brightness,sidebarInverted:O.sidebarInverted})),o.dispatch(Object(Xt.f)({pref:"window_background_gradients",value:!1})),o.dispatch(Object(Xt.f)({pref:"underline_links",value:!0}))),a&&!Object(te.a)(r,"brightness")&&o.dispatch(Object(ln.a)({...r,brightness:Jo.a,sidebarInverted:!1}));return}if(j===Bt.a.customTheme)E=Object(Bt.l)({legacyTheme:u,iaTheme:r});else{const O=a;E=Object(Bt.o)(u,g,j,O)}o.dispatch(Object(ln.a)(E))}v(Jt,"migrateThemeVariablesToIA4");const Zo=Object(jt.a)(I.a);function ue(i){return fe.apply(this,arguments)}v(ue,"setupRedux");function fe(){return fe=Object(n.coroutine)(function*(i){let{contextualInfo:o,initialState:s}=i;const{teamOrEnterpriseBootId:a,enterpriseId:r,userId:u}=o;Object(P.b)("BOOT",`(${a}) Configuring redux store`),(yield o.isBootingWarm)||(yield Tt(a));const j={teamOrEnterpriseId:a,reducers:D,middlewares:Zo,initialState:s,sideEffects:So.a};return r&&(j.enterpriseId=r),Object(We.a)({...j,userId:u,isWarmBooting:o.isBootingWarm})}),fe.apply(this,arguments)}v(fe,"_setupRedux");function oo(i){i.hooks.dataSetupInitialState.tap("Set initial state (and rehydrating cached data during a warm boot)",function(){var o=Object(n.coroutine)(function*(s){let{contextualInfo:a}=s;return{initialState:yield To({contextualInfo:a}),contextualInfo:a}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataSetupInitialState.tap("Set up team debugger (dev/jspath only)",function(){var o=Object(n.coroutine)(function*(s){let{contextualInfo:a,initialState:r}=s;return Co({contextualInfo:a}),{contextualInfo:a,initialState:r}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataSetupStore.tap("Setup team-level Redux Store",function(){var o=Object(n.coroutine)(function*(s){let{initialState:a,contextualInfo:r}=s;return{store:yield ue({contextualInfo:r,initialState:a}),initialState:a,contextualInfo:r}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Dispatch API data into the store",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return yield fo(a,r,u),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Fetch additional members for DM/MDPM/conversations.view",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return Ve({clientBootData:r.clientBootData,store:a}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Navigate to the expected route based on fresh dispatched data",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return ae({store:a,contextualInfo:u,shouldUpdateRoute:!1}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Update local config with lastColdBootTs as current date on cold boot",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return(yield u.isBootingWarm)||Object(Ft.v)("lastColdBootTs",Date.now()),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Mark boot as completed when all data has been dispatched",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return Object(ze.a)(u.teamId),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Connect to socket",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return Object(tn.a)({store:a,contextualInfo:u}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Set boot type (warm/cold)",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return vt({store:a,contextualInfo:u}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Set focus",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return Eo({store:a,contextualInfo:u}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Set workspace booted",ce),i.hooks.dataDispatch.tap("Load emoji translations",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return Io({contextualInfo:u}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataDispatch.tap("Validate that the locale we are loading into is valid",function(){var o=Object(n.coroutine)(function*(s){let{store:a,apiData:r,contextualInfo:u}=s;return Kt({store:a,contextualInfo:u}),{store:a,apiData:r,contextualInfo:u}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataAfterInitialStoreHydration.tap("Indicate whether we're performing a warm boot",function(){var o=Object(n.coroutine)(function*(s){let{store:a,contextualInfo:r}=s;return(yield r.isBootingWarm)?(a.dispatch(Object(Ke.b)(!0)),{store:a,contextualInfo:r}):{store:a,contextualInfo:r}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataAfterInitialStoreHydration.tap("Dispatch experiment overrides from persisted dispatched data on warm boot",function(){var o=Object(n.coroutine)(function*(s){let{store:a,contextualInfo:r}=s;return(yield r.isBootingWarm)?(ut({store:a,contextualInfo:r}),{store:a,contextualInfo:r}):{store:a,contextualInfo:r}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataAfterInitialStoreHydration.tap("Navigate to the expected route based on persisted dispatched data on warm boot",function(){var o=Object(n.coroutine)(function*(s){let{store:a,contextualInfo:r}=s;return(yield r.isBootingWarm)?(ae({store:a,contextualInfo:r,shouldUpdateRoute:!0}),{store:a,contextualInfo:r}):{store:a,contextualInfo:r}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataAfterInitialStoreHydration.tap("Register event handlers",function(){var o=Object(n.coroutine)(function*(s){let{store:a,contextualInfo:r}=s;return Ko(),{contextualInfo:r,store:a}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataAfterInitialStoreHydration.tap("Signal that the store has been hydrated",function(){var o=Object(n.coroutine)(function*(s){let{store:a,contextualInfo:r}=s;return a.dispatch(Object(de.a)()),{contextualInfo:r,store:a}});return function(s){return o.apply(this,arguments)}}()),i.hooks.dataAfterInitialStoreHydration.tap("Migrate old theming variables to IA4 theming variables",function(){var o=Object(n.coroutine)(function*(s){let{store:a,contextualInfo:r}=s;return Jt({store:a}),{contextualInfo:r,store:a}});return function(s){return o.apply(this,arguments)}}())}v(oo,"register");const me={};Object.defineProperty(me,"setupRedux",{get:()=>ue,set:i=>{ue=i}})},eahn:function(Zt,e,t){"use strict";t.d(e,"a",function(){return ut});var n=t("9oTK"),P=t("fUkL"),I=t("oTSI"),D=t("Lgge"),jt=t("Uqsd"),B=t("pmGC"),ct=t("s4P+"),lt=t("kBpe"),Q=t("XzGp");let b={};function yt(){return Y.apply(this,arguments)}v(yt,"clientLogsRequest");function Y(){return Y=Object(n.coroutine)(function*(){let nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1?arguments[1]:void 0;yield D.a.all(nt.map(function(){var at=Object(n.coroutine)(function*(w){let{ts:N,platform:rt}=w;if(!N||rt!=="ssb"||(b[M]=b[M]||{},b[M][N]))return;b[M][N]=!0;const V=Object(ct.a)({teamId:M,label:"CLIENT-LOGS"});V.info(`Received request ${N} for logs; sending them up...`);try{yield Object(Q.b)()}catch(st){V.warn(`Error running client metrics for request ${N}: ${st}`)}try{yield Object(B.a)(M),V.info(`Successfully sent logs up for request ${N}`)}catch(st){V.warn(`Unable to send logs up for request ${N}: ${st}`)}});return function(w){return at.apply(this,arguments)}}()))}),Y.apply(this,arguments)}v(Y,"_clientLogsRequest");function dt(){Object(lt.i)()&&Object(jt.c)("client_logs_request",yt)}v(dt,"maybeRegisterClientRtmHandlers"),Object.defineProperty({clientLogsRequest:yt,handledLogRequestsByTeamId:b},"handledLogRequestsByTeamId",{get:()=>b,set:nt=>{b=nt}});var Et=Object(I.a)(()=>{dt()}),Mt=t("hhWw"),p=t("MTnN"),Z=t("SjsT"),R=t("4AxN"),K=t("mvCd");function q(nt){return U.apply(this,arguments)}v(q,"setupObjectStoreMetrics");function U(){return U=Object(n.coroutine)(function*(nt){let{isWarmBooting:M}=nt;const at=yield M;Z.a.setBootTypeForMetrics(at?R.a.Warm:R.a.Cold)}),U.apply(this,arguments)}v(U,"_setupObjectStoreMetrics");function ut(nt){Et();const M=Object(P.a)(nt);if(Object(Mt.b)()){const{teamOrEnterpriseId:at,enterpriseId:w,userId:N,isWarmBooting:rt}=nt;q({isWarmBooting:rt});const V=Object(K.f)({teamOrEnterpriseId:at,userId:N});M.dispatch(Object(p.a)(V));const st=Object(K.f)({teamOrEnterpriseId:w??at,userId:N});M.dispatch(Object(p.b)(st))}return M}v(ut,"configureTeamStoreForClient")},pZ7i:function(Zt,e,t){"use strict";t.d(e,"a",function(){return P});var n=t("DwFS");const P=Object(n.a)("Signals that redux stores have been hydrated during boot");P.meta={name:"createAction",key:"createActionmarkBootStoreHydrated",description:"Signals that redux stores have been hydrated during boot"}}}]);})();
